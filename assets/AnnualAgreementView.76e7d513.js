var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,o=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l;import{_ as i}from"./index.9b869bd5.js";import{_ as n}from"./index.9fcc5db4.js";import{_ as s}from"./index.dd62f48c.js";import{_ as u}from"./index.36147ed9.js";import{_ as p}from"./index.a39b0902.js";import{_ as m}from"./index.9ab52a84.js";import{_ as c}from"./index.4d216ae4.js";import{d as f,r as h,az as y,bj as V,aV as _,aW as w,aS as b,a as x,a_ as g,ay as U,aX as P,cf as q,a$ as C}from"./index.44eff430.js";import{b as v}from"./retail-master-data.service.de057498.js";import{g as j,a as k}from"./vxeTableHelper.6baae079.js";import"./dayjs.min.7438ea6f.js";import"./master-data.service.95993c0c.js";const R=C(f({__name:"AnnualAgreementView",setup(e){const f=h(),C=y((R=((e,t)=>{for(var a in t||(t={}))r.call(t,a)&&o(e,a,t[a]);if(l)for(var a of l(t))d.call(t,a)&&o(e,a,t[a]);return e})({},j("grid",v)),t(R,a({formConfig:{items:[{folding:!1,slots:{default:"search_year"}},{folding:!1,slots:{default:"search_headquarter"},title:"注意",titlePrefix:{content:"所有的分销商和药店即可，不需要跟年份等联动"}},{folding:!0,slots:{default:"search_contractParty"}},{folding:!0,slots:{default:"search_partner"}},{folding:!0,itemRender:{name:"$input",props:{type:"date",placeholder:"开始日期从"}}},{folding:!0,itemRender:{name:"$input",props:{type:"date",placeholder:"开始日期到"}}},{folding:!0,itemRender:{name:"$input",props:{type:"date",placeholder:"结束日期从"}}},{folding:!0,itemRender:{name:"$input",props:{type:"date",placeholder:"结束日期到"}}},{folding:!0,slots:{default:"search_productMix"},title:"注意",titlePrefix:{content:"所有的有效的字段表内容即可，不需要跟年份等联动"}},{folding:!1,slots:{default:"search_category"}},{folding:!1,slots:{default:"search_status"}},{folding:!0,itemRender:{name:"$select",options:[{value:"是",label:"是"},{value:"否",label:"否"}],props:{placeholder:"是否有协议文件"}}},{collapseNode:!0,itemRender:{},slots:{default:"search_operation"}}]},columns:[{field:"checkbox",type:"checkbox",width:50,align:"center",fixed:"left"},{field:"code",title:"协议编号",width:100},{field:"name",title:"协议名称",width:300},{field:"year",title:"年份",width:100},{field:"headquarterCode",title:"总部编码",width:100},{field:"headquarterName",title:"总部名称",width:300},{field:"headquarterAbbr",title:"总部简称",width:200},{field:"headquarterCategory",title:"KA属性",width:100},{field:"contractPartyCode",title:"零售签约主体编码",width:200},{field:"contractPartyName",title:"零售签约主体名称",width:300},{field:"partnerCode",title:"合作商业编码",width:200},{field:"partnerName",title:"合作商业名称",width:300},{field:"startDate",title:"开始日期",width:100},{field:"endDate",title:"结束日期",width:100},{field:"productMixName",title:"产品组合名称",width:300},{field:"haveAgreementFiles",title:"是否有协议文件",width:150},{title:"协议文件",width:100,slots:{default:"agreementFiles"}},{field:"status",title:"协议状态",width:100},{field:"createdBy",title:"创建人",width:100},{field:"createdOn",title:"创建时间",width:100},{field:"modifiedBy",title:"修改人",width:100},{field:"modifiedOn",title:"修改时间",width:100},{title:"操作",align:"center",width:180,fixed:"right",slots:{default:"operations"}}]}))));var R;const D=y({formData:{code:"C20230001",name:"2023 国药集团 希舒美，舒坦明 合作协议",year:"2023",headquarter:"DI00005189",contractParty:"",partner:"",productMix:["希舒美","舒坦明"],startDate:"",endDate:""},formRules:{year:[{required:!0}],headquarter:[{required:!0}],contractParty:[{required:!0}],partner:[{required:!0}],productMix:[{required:!0}],startDate:[{required:!0}],endDate:[{required:!0}]},formItems:[{field:"code",title:"协议编码",span:11,titlePrefix:{content:"8位纯数字编码递增，按照年份+0001开始；新增时此字段不可见，后台自动生成"},itemRender:{name:"$input",props:{disabled:!0}}},{field:"name",title:"协议名称",span:22,titlePrefix:{content:"年份+总部简称+产品组合；新增时此字段不可见，后台自动生成"},itemRender:{name:"$input",props:{disabled:!0}}},{field:"year",title:"年份",span:11,slots:{default:"year"}},{field:"headquarter",title:"零售总部",span:11,slots:{default:"headquarter"}},{field:"productMix",title:"产品组合",titlePrefix:{content:"不需要跟年份做校验"},span:22,slots:{default:"productMix"}},{field:"headquarter",title:"零售签约主体",span:11,slots:{default:"contractParty"}},{field:"headquarter",title:"合作商业",span:11,slots:{default:"partner"}},{field:"startDate",title:"开始日期",span:11,titlePrefix:{content:"不需要跟年份做校验"},itemRender:{name:"$input",props:{type:"date"}}},{field:"endDate",title:"结束日期",span:11,titlePrefix:{content:"不需要跟年份做校验"},itemRender:{name:"$input",props:{type:"date"}}},{align:"center",span:24,itemRender:{},slots:{default:"form_buttons"}}],showCreator:!1,showFileUpload:!1});return(e,t)=>{const a=c,l=m,r=p,d=u,o=s,h=V("vxe-button"),y=V("vxe-grid"),v=n,j=V("vxe-form"),R=V("vxe-modal"),M=i,O=V("page-container");return _(),w(O,null,{default:b((()=>[x(y,q({ref_key:"xGrid",ref:f},U(C)),{search_year:b((({data:e})=>[x(a,{modelValue:e.year,"onUpdate:modelValue":t=>e.year=t},null,8,["modelValue","onUpdate:modelValue"])])),search_headquarter:b((({data:e})=>[x(l,{modelValue:e.headquarter,"onUpdate:modelValue":t=>e.headquarter=t,placeholder:"总部"},null,8,["modelValue","onUpdate:modelValue"])])),search_partner:b((({data:e})=>[x(l,{modelValue:e.partner,"onUpdate:modelValue":t=>e.partner=t,placeholder:"合作商业"},null,8,["modelValue","onUpdate:modelValue"])])),search_contractParty:b((({data:e})=>[x(l,{modelValue:e.contractParty,"onUpdate:modelValue":t=>e.contractParty=t,placeholder:"零售签约主体"},null,8,["modelValue","onUpdate:modelValue"])])),search_productMix:b((({data:e})=>[x(r,{modelValue:e.productMix,"onUpdate:modelValue":t=>e.productMix=t,multiple:""},null,8,["modelValue","onUpdate:modelValue"])])),search_status:b((({data:e})=>[x(d,{modelValue:e.status,"onUpdate:modelValue":t=>e.status=t,type:"零售返利协议",placeholder:"状态"},null,8,["modelValue","onUpdate:modelValue"])])),search_category:b((({data:e})=>[x(o,{modelValue:e.category,"onUpdate:modelValue":t=>e.category=t},null,8,["modelValue","onUpdate:modelValue"])])),search_operation:b((()=>[x(h,{status:"primary",type:"submit"},{default:b((()=>[g("搜索")])),_:1})])),toolbar_buttons:b((()=>[x(h,{status:"primary",onClick:t[0]||(t[0]=e=>U(D).showCreator=!0)},{default:b((()=>[g("新建")])),_:1}),x(h,{status:"primary",onClick:t[1]||(t[1]=e=>U(k)("数据团队用户，零售运营团队\n        年份(Y)、总部编码(Y)、零售签约主体编码(Y)、合作商业编码(Y)、开始日期(Y)、结束日期(Y)、产品组合(Y)\n        协议编码自动生成，8位纯数字编码递增，按照年份+0001开始\n        协议名称自动生成，年份+总部简称+产品组合名称\n        唯一性：年份+总部编码+开始日期+结束日期+产品组合；日期交叉等系统不做校验\n        导入的时候，产品组合不能批量。\n        "))},{default:b((()=>[g(" 数据导入 ")])),_:1}),x(h,{status:"primary",onClick:t[2]||(t[2]=e=>U(k)("数据团队、零售KA团队、零售运营团队"))},{default:b((()=>[g(" 数据下载 ")])),_:1}),x(h,{status:"primary",content:"发布",onClick:t[3]||(t[3]=e=>U(k)("零售运营团队和数据团队操作，发布自己创建的数据。有勾选按勾选，不勾选按查询条件；只有自己创建的草稿状态的数据才可以发布；后续所有类似按钮都同样逻辑"))}),x(h,{status:"danger",onClick:t[4]||(t[4]=e=>U(k)("零售运营团队和数据团队；只能删除自己创建的草稿状态数据，批量删除，勾选则删除勾选，不勾选按查询条件；所有发布、删除、生效、失效操作，都要有confirm提示框")),content:"删除"}),x(h,{status:"primary",onClick:t[5]||(t[5]=e=>U(k)("看复杂程度考虑是否开发此功能。批量上传协议文件，根据文件名=协议编码，系统自动重命名，来自动关联到协议数据上")),content:"批量上传协议文件"})])),agreementFiles:b((()=>[x(h,{type:"text",status:"primary",content:"点击查看",onClick:t[6]||(t[6]=e=>U(k)("零售运营团队和数据团队可上传").then((()=>U(D).showFileUpload=!0)))})])),operations:b((({row:e})=>[x(h,{status:"primary",onClick:t[7]||(t[7]=e=>U(k)("仅能编辑开始日期和结束日期，任何状态都可以编辑")),content:"编辑"}),"有效"===e.status?(_(),w(h,{key:0,status:"danger",onClick:t[8]||(t[8]=e=>U(k)("只有有效的才可以作废")),content:"作废"})):P("v-if",!0)])),_:1},16),x(R,{modelValue:U(D).showCreator,"onUpdate:modelValue":t[10]||(t[10]=e=>U(D).showCreator=e),title:"新建零售返利协议",width:"80%",resize:"","destroy-on-close":""},{default:b((()=>[x(j,{data:U(D).formData,rules:U(D).formRules,items:U(D).formItems,"title-align":"right","title-width":"150"},{year:b((({data:e})=>[x(a,{modelValue:e.year,"onUpdate:modelValue":t=>e.year=t},null,8,["modelValue","onUpdate:modelValue"])])),headquarter:b((({data:e})=>[x(v,{modelValue:e.headquarter,"onUpdate:modelValue":t=>e.headquarter=t},null,8,["modelValue","onUpdate:modelValue"])])),productMix:b((({data:e})=>[x(r,{modelValue:e.productMix,"onUpdate:modelValue":t=>e.productMix=t,multiple:""},null,8,["modelValue","onUpdate:modelValue"])])),partner:b((({data:e})=>[x(l,{modelValue:e.partner,"onUpdate:modelValue":t=>e.partner=t},null,8,["modelValue","onUpdate:modelValue"])])),contractParty:b((({data:e})=>[x(l,{modelValue:e.contractParty,"onUpdate:modelValue":t=>e.contractParty=t},null,8,["modelValue","onUpdate:modelValue"])])),form_buttons:b((()=>[x(h,{type:"submit",status:"primary"},{default:b((()=>[g("保存")])),_:1}),x(h,{onClick:t[9]||(t[9]=e=>U(D).showCreator=!1)},{default:b((()=>[g("取消")])),_:1})])),_:1},8,["data","rules","items"])])),_:1},8,["modelValue"]),x(R,{modelValue:U(D).showFileUpload,"onUpdate:modelValue":t[11]||(t[11]=e=>U(D).showFileUpload=e),title:"协议文件",width:"80%",resize:"","destroy-on-close":""},{default:b((()=>[x(M,{"enable-insert":"","enable-remove":""})])),_:1},8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-69b3242b"],["__file","C:/Users/ThinkPad/source/Bonbonniere/bonbon-vue/src/views/retail-master-data/AnnualAgreementView.vue"]]);export{R as default};
