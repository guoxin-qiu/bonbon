var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r;import{_ as n}from"./index.9b869bd5.js";import{_ as d}from"./index.36147ed9.js";import{_ as s}from"./index.62bfc2e0.js";import{_ as p}from"./index.9ab52a84.js";import{ce as u,d as m,r as c,az as f,bj as h,aV as v,aW as b,aS as y,a as g,a_ as w,aX as _,ay as x,cf as V,a$ as C}from"./index.44eff430.js";import{g as j,a as k}from"./vxeTableHelper.6baae079.js";import"./dayjs.min.7438ea6f.js";import"./master-data.service.95993c0c.js";function U(e){return t=this,a=null,r=function*(){return u.get({url:"/api/c-master-data/agreement",data:e})},new Promise(((e,o)=>{var l=e=>{try{n(r.next(e))}catch(t){o(t)}},i=e=>{try{n(r.throw(e))}catch(t){o(t)}},n=t=>t.done?e(t.value):Promise.resolve(t.value).then(l,i);n((r=r.apply(t,a)).next())}));var t,a,r}const R=C(m({__name:"CompensationAgreement",setup(e){const u=c(),m=f((C=((e,t)=>{for(var a in t||(t={}))o.call(t,a)&&i(e,a,t[a]);if(r)for(var a of r(t))l.call(t,a)&&i(e,a,t[a]);return e})({},j("grid",U)),t(C,a({formConfig:{items:[{folding:!1,slots:{default:"search_vendor"}},{folding:!1,itemRender:{name:"$input",props:{placeholder:"协议编号"}}},{folding:!1,slots:{default:"search_status"}},{folding:!0,itemRender:{name:"$input",props:{placeholder:"协议版本"}}},{folding:!0,itemRender:{name:"$input",props:{placeholder:"协议类型"}}},{folding:!0,slots:{default:"search_province"}},{folding:!0,itemRender:{name:"$input",props:{type:"date",placeholder:"签署日期从"}}},{folding:!0,itemRender:{name:"$input",props:{type:"date",placeholder:"签署日期到"}}},{folding:!0,itemRender:{name:"$select",options:[{value:"是",label:"是"},{value:"否",label:"否"}],props:{placeholder:"是否有协议文件"}}},{collapseNode:!0,itemRender:{},slots:{default:"search_operation"}}]},columns:[{field:"checkbox",type:"checkbox",width:50,align:"center",fixed:"left"},{field:"code",title:"协议编号",width:100},{field:"version",title:"协议版本",width:100},{field:"category",title:"协议类型",width:100},{field:"vendorCode",title:"商业编码",width:100},{field:"vendorName",title:"商业名称",width:300},{field:"province",title:"商业省份",width:100},{field:"signDate",title:"签署日期",width:100},{field:"haveAgreementFiles",title:"是否有协议文件",width:150},{title:"协议文件",width:100,slots:{default:"agreementFiles"}},{field:"status",title:"协议状态",width:100},{field:"createdBy",title:"创建人",width:100},{field:"createdOn",title:"创建时间",width:100},{field:"modifiedBy",title:"修改人",width:100},{field:"modifiedOn",title:"修改时间",width:100},{title:"操作",align:"center",width:120,fixed:"right",slots:{default:"operations"}}]}))));var C;const R=f({formData:{code:"",name:""},formRules:{year:[{required:!0}],headquarter:[{required:!0}],contractParty:[{required:!0}],partner:[{required:!0}],productMix:[{required:!0}],startDate:[{required:!0}],endDate:[{required:!0}]},formItems:[{field:"code",title:"协议编码",span:11,titlePrefix:{content:"A+8位纯数字编码递增；新增时此字段不可见，后台自动生成"},itemRender:{name:"$input",props:{disabled:!0}}},{field:"version",title:"协议版本",span:11,titlePrefix:{content:"手填"},itemRender:{name:"$input",props:{disabled:!0}}},{field:"category",title:"协议类型",span:11,titlePrefix:{content:"手填"},itemRender:{name:"$input",props:{disabled:!0}}},{field:"vendor",title:"商业",span:11,slots:{default:"vendor"}},{field:"signDate",title:"签署日期",span:11,itemRender:{name:"$input",props:{type:"date"}}},{align:"center",span:24,itemRender:{},slots:{default:"form_buttons"}}],showCreator:!1,showFileUpload:!1});return(e,t)=>{const a=p,r=s,o=d,l=h("vxe-button"),i=h("vxe-grid"),c=h("vxe-form"),f=h("vxe-modal"),C=n,j=h("page-container");return v(),b(j,null,{default:y((()=>[g(i,V({ref_key:"xGrid",ref:u},x(m)),{search_vendor:y((({data:e})=>[g(a,{modelValue:e.vendor,"onUpdate:modelValue":t=>e.vendor=t,placeholder:"商业编码或名称"},null,8,["modelValue","onUpdate:modelValue"])])),search_province:y((({data:e})=>[g(r,{modelValue:e.province,"onUpdate:modelValue":t=>e.province=t,type:"province",placeholder:"省份"},null,8,["modelValue","onUpdate:modelValue"])])),search_status:y((({data:e})=>[g(o,{modelValue:e.status,"onUpdate:modelValue":t=>e.status=t,type:"招标补偿协议",placeholder:"状态"},null,8,["modelValue","onUpdate:modelValue"])])),search_operation:y((()=>[g(l,{status:"primary",type:"submit"},{default:y((()=>[w("搜索")])),_:1})])),toolbar_buttons:y((()=>[_(' <vxe-button status="primary" @click="form.showCreator = true">新建</vxe-button> '),g(l,{status:"primary",onClick:t[0]||(t[0]=e=>x(k)("数据团队用户\n        协议版本(Y)、协议类型(Y)、商业编码(Y)、签署日期(Y)\n        协议编码自动生成，A+8位纯数字编码递增\n        唯一性：商业编码+协议版本+协议类型+签署日期\n        增量新增导入，导入后的协议状态为草稿\n        "))},{default:y((()=>[w(" 数据导入 ")])),_:1}),g(l,{status:"primary",onClick:t[1]||(t[1]=e=>x(k)("数据团队"))},{default:y((()=>[w("数据下载")])),_:1}),g(l,{status:"primary",content:"发布",onClick:t[2]||(t[2]=e=>x(k)("数据团队操作，发布自己创建的数据。有勾选按勾选，不勾选按查询条件；只有自己创建的草稿状态的数据才可以发布"))}),g(l,{status:"danger",onClick:t[3]||(t[3]=e=>x(k)("数据团队；只能删除自己创建的草稿状态数据，批量删除，勾选则删除勾选，不勾选按查询条件；所有发布、删除、生效、失效操作，都要有confirm提示框")),content:"删除"}),g(l,{status:"primary",onClick:t[4]||(t[4]=e=>x(k)("看复杂程度考虑是否开发此功能。批量上传协议文件，根据文件名=协议编码，系统自动重命名，来自动关联到协议数据上")),content:"批量上传协议文件"})])),agreementFiles:y((()=>[g(l,{type:"text",status:"primary",content:"点击查看",onClick:t[5]||(t[5]=e=>x(k)("数据团队上传").then((()=>x(R).showFileUpload=!0)))})])),operations:y((({row:e})=>[_(' <vxe-button\n          status="primary"\n          @click="alertMsg(\'仅能编辑开始日期和结束日期，任何状态都可以编辑\')"\n          content="编辑"\n        /> '),"有效"===e.status?(v(),b(l,{key:0,status:"danger",onClick:t[6]||(t[6]=e=>x(k)("只有有效的才可以作废")),content:"作废"})):_("v-if",!0)])),_:1},16),g(f,{modelValue:x(R).showCreator,"onUpdate:modelValue":t[8]||(t[8]=e=>x(R).showCreator=e),title:"新建招标补偿协议",width:"80%",resize:"","destroy-on-close":""},{default:y((()=>[g(c,{data:x(R).formData,rules:x(R).formRules,items:x(R).formItems,"title-align":"right","title-width":"150"},{vendor:y((({data:e})=>[g(a,{modelValue:e.vendor,"onUpdate:modelValue":t=>e.vendor=t},null,8,["modelValue","onUpdate:modelValue"])])),form_buttons:y((()=>[g(l,{type:"submit",status:"primary"},{default:y((()=>[w("保存")])),_:1}),g(l,{onClick:t[7]||(t[7]=e=>x(R).showCreator=!1)},{default:y((()=>[w("取消")])),_:1})])),_:1},8,["data","rules","items"])])),_:1},8,["modelValue"]),g(f,{modelValue:x(R).showFileUpload,"onUpdate:modelValue":t[9]||(t[9]=e=>x(R).showFileUpload=e),title:"协议文件",width:"80%",resize:"","destroy-on-close":""},{default:y((()=>[g(C,{"enable-insert":"","enable-remove":""})])),_:1},8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-b2480260"],["__file","C:/Users/ThinkPad/source/Bonbonniere/bonbon-vue/src/views/c-master-data/CompensationAgreement.vue"]]);export{R as default};
