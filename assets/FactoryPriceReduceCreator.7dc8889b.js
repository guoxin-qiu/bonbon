var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,d=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,o=(e,t)=>{for(var a in t||(t={}))i.call(t,a)&&d(e,a,t[a]);if(l)for(var a of l(t))n.call(t,a)&&d(e,a,t[a]);return e},r=(e,l)=>t(e,a(l));import{d as s,aQ as u,r as m,az as f,bj as p,aV as c,aW as h,aS as v,a as w,aX as y,aR as b,ca as _,ay as g,ac as x,a_ as P,cf as V,bR as D,cj as C,ck as k,cl as j,bK as S,a$ as O}from"./index.44eff430.js";import{g as R,a as U}from"./vxeTableHelper.6baae079.js";import{k as N,b as T,q as Y}from"./temporary-data.4dfd9cc4.js";import{d as E}from"./dayjs.min.7438ea6f.js";import{r as F}from"./routerHelper.692f5c09.js";const q=O(s({__name:"FactoryPriceReduceCreator",setup(e){const t=u(),a=m("1"),l=m(),i=E().format("YYYY-MM-DD"),n=E().add(13,"day").format("YYYY-MM-DD"),d=f({formData:{chineseName:"单出厂价下调库存结算报告",englishName:"Single factory price downward inventory settlement report",inventoryCompensationScenario:"单出厂价下调",inventoryCompensationType:"库存补偿",t1t2Ref:"2022Q4",windowPhaseStartDate:i,windowPhaseEndDate:n},formRules:{chineseName:[{required:!0}],englishName:[{required:!0}],inventoryCompensationScenario:[{required:!0}],inventoryCompensationType:[{required:!0}]},showPlanSelector:!1}),s=f(r(o({},R("importerGrid")),{data:N.filter((e=>"进口商"===e.cObject)),pagerConfig:void 0,columns:[{field:"cObject",title:"补偿对象",width:100},{field:"skuCode",title:"产品编码",width:100},{field:"skuName",title:"产品名称"},{field:"inventoryDate",title:"盘库日期",width:100},{field:"priceReductionDate",title:"降价日期",width:100},{field:"basePriceNew",title:"CIF价格",width:110},{field:"basePriceOld",title:"CIF价格",width:110},{field:"unitPrice",title:"补偿单价",width:100}]})),O=f(r(o({},R("dealerGrid")),{data:N.filter((e=>"渠道"===e.cObject)),pagerConfig:void 0,columns:[{field:"cObject",title:"补偿对象",width:100},{field:"skuCode",title:"产品编码",width:100},{field:"skuName",title:"产品名称"},{field:"province",title:"省份",width:80},{field:"inventoryDate",title:"盘库日期",width:100},{field:"priceReductionDate",title:"降价日期",width:100},{field:"basePriceNew",title:"新一级商底价",width:110},{field:"basePriceOld",title:"旧一级商底价",width:110},{field:"unitPrice",title:"补偿单价",width:100}]})),q=f(r(o({},R("planSelectorGrid")),{data:[{name:"单出厂价下调补偿方案-样例1",approvedDate:"2022-12-21"}],formConfig:{items:[{itemRender:{name:"$input",props:{placeholder:"补偿方案名称"}}},{itemRender:{},slots:{default:"search_operation"}}]},columns:[{field:"radio",type:"radio",width:50,align:"center",fixed:"left"},{field:"name",title:"补偿方案名称"},{field:"approvedDate",title:"审批完成日期"}]}));function G(){var e;null==(e=l.value)||e.validate((e=>{if(void 0===e){if(!d.formData.windowPhaseStartDate||!d.formData.windowPhaseEndDate)return void U("请先设置窗口期");U(`提交成功！\n          本次结算的窗口期为${d.formData.windowPhaseStartDate}~${d.formData.windowPhaseEndDate}。\n          已发送提醒邮件给相关的商务经理。`).then((()=>{F(t,"c-payment-inventory")}))}}))}return(e,i)=>{const n=p("vxe-option"),o=p("vxe-select"),r=p("vxe-form-item"),u=p("vxe-input"),m=p("vxe-form"),f=p("vxe-button"),R=p("vxe-grid"),N=j,E=S,K=p("vxe-checkbox"),M=p("vxe-modal"),$=p("page-container");return c(),h($,null,{default:v((()=>[w(m,{"title-align":"right","title-width":"100",data:g(d).formData,rules:g(d).formRules,ref_key:"xForm",ref:l},{default:v((()=>[y(' <vxe-form-item\n        title-width="180"\n        field="inventoryCompensationType"\n        title="报告类型"\n        :span="12"\n        :item-render="{}"\n      >\n        <template #default="{ data }">\n          <vxe-select v-model="data.inventoryCompensationType" disabled placeholder="">\n            <vxe-option\n              v-for="item in compensationType"\n              :key="item.value"\n              :value="item.value"\n              :label="item.label"\n            ></vxe-option>\n          </vxe-select>\n        </template>\n      </vxe-form-item> '),w(r,{"title-width":"180",field:"inventoryCompensationScenario",title:"降价类型",span:12,"item-render":{}},{default:v((({data:e})=>[w(o,{modelValue:e.inventoryCompensationScenario,"onUpdate:modelValue":t=>e.inventoryCompensationScenario=t,transfer:"",disabled:"",placeholder:""},{default:v((()=>[(c(!0),b(x,null,_(g(T),(e=>(c(),h(n,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),w(r,{"title-width":"180",field:"chineseName",title:"报告名称（中文）",span:24,"item-render":{}},{default:v((({data:e})=>[w(u,{modelValue:e.chineseName,"onUpdate:modelValue":t=>e.chineseName=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),w(r,{"title-width":"180",field:"englishName",title:"报告名称（英文）",span:24,"item-render":{}},{default:v((({data:e})=>[w(u,{modelValue:e.englishName,"onUpdate:modelValue":t=>e.englishName=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),w(r,{"title-width":"180",field:"t1t2Ref",title:"T1&T2关系",span:8,"item-render":{}},{default:v((({data:e})=>[w(o,{modelValue:e.t1t2Ref,"onUpdate:modelValue":t=>e.t1t2Ref=t,transfer:"",clearable:"",placeholder:""},{default:v((()=>[(c(!0),b(x,null,_(g(Y),(e=>(c(),h(n,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),w(r,{"title-width":"180",field:"windowPhase",title:"窗口期",span:16,"item-render":{}},{default:v((({data:e})=>[w(u,{modelValue:e.windowPhaseStartDate,"onUpdate:modelValue":t=>e.windowPhaseStartDate=t,type:"datetime",style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"]),P(" 至 "),w(u,{modelValue:e.windowPhaseEndDate,"onUpdate:modelValue":t=>e.windowPhaseEndDate=t,type:"datetime",style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data","rules"]),w(m,{"title-align":"right","title-width":"100",style:{"margin-top":"5px"}},{default:v((()=>[w(r,{title:"补偿方案信息","title-align":"left","title-width":200,span:3,"title-prefix":{icon:"vxe-icon-comment"}}),w(r,{"title-align":"left",span:12},{default:v((()=>[w(f,{status:"primary",onClick:i[0]||(i[0]=e=>g(d).showPlanSelector=!0)},{default:v((()=>[P("添加方案")])),_:1})])),_:1})])),_:1}),w(E,{activeKey:g(a),"onUpdate:activeKey":i[1]||(i[1]=e=>D(a)?a.value=e:null),type:"editable-card","hide-add":"",onEdit:i[2]||(i[2]=e=>g(U)("按tab删除所有数据")),style:{"margin-top":"10px"}},{default:v((()=>[w(N,{key:"2",tab:"进口商"},{default:v((()=>[w(R,V({ref:"xGrid"},g(s)),null,16)])),_:1}),w(N,{key:"1",tab:"渠道"},{default:v((()=>[w(R,V({ref:"xGrid"},g(O)),null,16)])),_:1})])),_:1},8,["activeKey"]),w(m,{"title-align":"right","title-width":"100",rules:g(d).formRules,ref_key:"xForm",ref:l},{default:v((()=>[w(r,{align:"center","title-align":"left",span:24},{default:v((()=>[w(f,{type:"submit",status:"primary",onClick:G},{default:v((()=>[P("提交")])),_:1}),w(f,{type:"submit",status:"primary",onClick:i[3]||(i[3]=e=>g(U)("保存草稿数据，校验必填项"))},{default:v((()=>[P(" 保存草稿 ")])),_:1}),w(f,{onClick:i[4]||(i[4]=e=>g(F)(g(t),"c-payment-inventory"))},{default:v((()=>[P("返回列表")])),_:1})])),_:1})])),_:1},8,["rules"]),w(M,{modelValue:g(d).showPlanSelector,"onUpdate:modelValue":i[8]||(i[8]=e=>g(d).showPlanSelector=e),title:"选择单出厂价下调补偿方案",width:"80%","min-width":"600","min-height":"300",resize:"","destroy-on-close":""},{default:v((()=>[w(R,C(k(g(q))),{search_operation:v((()=>[w(f,{status:"primary",onClick:i[5]||(i[5]=e=>g(U)("审批通过的，类型为单出厂价下调的补偿方案"))},{default:v((()=>[P(" 搜索 ")])),_:1})])),toolbar_buttons:v((()=>[w(K,null,{default:v((()=>[P("进口商")])),_:1}),w(K,null,{default:v((()=>[P("渠道")])),_:1}),w(f,{status:"primary",onClick:i[6]||(i[6]=e=>g(U)("至少选择一条；可多补偿对象；将明细带回")),style:{"margin-left":"12px"}},{default:v((()=>[P(" 确认选择 ")])),_:1})])),operations:v((()=>[w(f,{status:"danger",onClick:i[7]||(i[7]=e=>g(U)("直接删除"))},{default:v((()=>[P("删除")])),_:1})])),_:1},16)])),_:1},8,["modelValue"])])),_:1})}}}),[["__file","C:/Users/ThinkPad/source/Bonbonniere/bonbon-vue/src/views/c-payment/FactoryPriceReduceCreator.vue"]]);export{q as default};
