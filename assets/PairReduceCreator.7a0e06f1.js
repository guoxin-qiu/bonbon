var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,d=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,o=(e,t)=>{for(var a in t||(t={}))i.call(t,a)&&d(e,a,t[a]);if(l)for(var a of l(t))n.call(t,a)&&d(e,a,t[a]);return e},r=(e,l)=>t(e,a(l));import{d as s,aQ as u,r as m,az as f,bj as p,aV as c,aW as h,aS as w,a as v,aX as y,aR as b,ca as _,ay as P,ac as g,a_ as x,cf as C,bR as D,cj as V,ck as k,cl as j,bK as S,a$ as N}from"./index.44eff430.js";import{g as O,a as R}from"./vxeTableHelper.6baae079.js";import{k as U,b as T,q as Y}from"./temporary-data.4dfd9cc4.js";import{d as E}from"./dayjs.min.7438ea6f.js";import{r as G}from"./routerHelper.692f5c09.js";const q=N(s({__name:"PairReduceCreator",setup(e){const t=u(),a=m("1"),l=m(),i=E().format("YYYY-MM-DD"),n=E().add(13,"day").format("YYYY-MM-DD"),d=f({formData:{chineseName:"中标价&出厂价同时下调库存结算报告",englishName:"Pair price downward inventory settlement report",inventoryCompensationScenario:"中标价&出厂价同时下调",inventoryCompensationType:"库存补偿",t1t2Ref:"2022Q4",windowPhaseStartDate:i,windowPhaseEndDate:n},formRules:{chineseName:[{required:!0}],englishName:[{required:!0}],inventoryCompensationScenario:[{required:!0}],inventoryCompensationType:[{required:!0}]},showPlanSelector:!1}),s=f(r(o({},O("dealerGrid")),{data:U.filter((e=>"进口商"===e.cObject)),pagerConfig:void 0,columns:[{field:"skuCode",title:"产品编码",width:100},{field:"skuName",title:"产品名称"},{field:"inventoryDate",title:"盘库日期",width:100},{field:"priceReductionDate",title:"降价日期",width:100},{field:"basePriceNew",title:"CIF价格",width:110},{field:"basePriceOld",title:"CIF价格",width:110},{field:"unitPrice",title:"补偿单价",width:100}]})),N=f(r(o({},O("dealerGrid")),{data:U.filter((e=>"渠道"===e.cObject)),pagerConfig:void 0,columns:[{field:"skuCode",title:"产品编码",width:100},{field:"skuName",title:"产品名称"},{field:"province",title:"省份",width:80},{field:"inventoryDate",title:"盘库日期",width:100},{field:"priceReductionDate",title:"降价日期",width:100},{field:"basePriceNew",title:"新一级商底价",width:110},{field:"basePriceOld",title:"旧一级商底价",width:110},{field:"unitPrice",title:"补偿单价",width:100}]})),q=f(r(o({},O("terminalGrid")),{data:U.filter((e=>"终端"===e.cObject)),pagerConfig:void 0,columns:[{field:"inventoryDate",title:"降价日期",width:150},{field:"province",title:"省份",width:80},{field:"city",title:"城市",width:80},{field:"skuCode",title:"产品编码"},{field:"skuName",title:"产品名称",width:200},{field:"basePriceNew",title:"新一级商底价",width:120},{field:"basePriceOld",title:"旧一级商底价",width:120},{field:"unitPrice",title:"补偿单价",width:100}]})),F=f(r(o({},O("planSelectorGrid")),{data:[{name:"同时下调补偿方案-样例1",approvedDate:"2022-12-21"}],formConfig:{items:[{itemRender:{name:"$input",props:{placeholder:"补偿方案名称"}}},{itemRender:{},slots:{default:"search_operation"}}]},columns:[{field:"radio",type:"radio",width:50,align:"center",fixed:"left"},{field:"name",title:"补偿方案名称"},{field:"approvedDate",title:"审批完成日期"}]}));function K(){var e;null==(e=l.value)||e.validate((e=>{if(void 0===e){if(!d.formData.windowPhaseStartDate||!d.formData.windowPhaseEndDate)return void R("请先设置窗口期");R(`提交成功！\n          本次结算的窗口期为${d.formData.windowPhaseStartDate}~${d.formData.windowPhaseEndDate}。\n          已发送提醒邮件给相关的商务经理。`).then((()=>{G(t,"c-payment-inventory")}))}}))}return(e,i)=>{const n=p("vxe-option"),o=p("vxe-select"),r=p("vxe-form-item"),u=p("vxe-input"),m=p("vxe-form"),f=p("vxe-button"),O=p("vxe-grid"),U=j,E=S,M=p("vxe-checkbox"),$=p("vxe-modal"),I=p("page-container");return c(),h(I,null,{default:w((()=>[v(m,{"title-align":"right","title-width":"100",data:P(d).formData,rules:P(d).formRules,ref_key:"xForm",ref:l},{default:w((()=>[y(' <vxe-form-item\n        title-width="180"\n        field="inventoryCompensationType"\n        title="报告类型"\n        :span="12"\n        :item-render="{}"\n      >\n        <template #default="{ data }">\n          <vxe-select v-model="data.inventoryCompensationType" disabled placeholder="">\n            <vxe-option\n              v-for="item in compensationType"\n              :key="item.value"\n              :value="item.value"\n              :label="item.label"\n            ></vxe-option>\n          </vxe-select>\n        </template>\n      </vxe-form-item> '),v(r,{"title-width":"180",field:"inventoryCompensationScenario",title:"降价类型",span:12,"item-render":{}},{default:w((({data:e})=>[v(o,{modelValue:e.inventoryCompensationScenario,"onUpdate:modelValue":t=>e.inventoryCompensationScenario=t,transfer:"",disabled:"",placeholder:""},{default:w((()=>[(c(!0),b(g,null,_(P(T),(e=>(c(),h(n,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),v(r,{"title-width":"180",field:"chineseName",title:"报告名称（中文）",span:24,"item-render":{}},{default:w((({data:e})=>[v(u,{modelValue:e.chineseName,"onUpdate:modelValue":t=>e.chineseName=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),v(r,{"title-width":"180",field:"englishName",title:"报告名称（英文）",span:24,"item-render":{}},{default:w((({data:e})=>[v(u,{modelValue:e.englishName,"onUpdate:modelValue":t=>e.englishName=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),v(r,{"title-width":"180",field:"t1t2Ref",title:"T1&T2关系",span:8,"item-render":{}},{default:w((({data:e})=>[v(o,{modelValue:e.t1t2Ref,"onUpdate:modelValue":t=>e.t1t2Ref=t,transfer:"",clearable:"",placeholder:""},{default:w((()=>[(c(!0),b(g,null,_(P(Y),(e=>(c(),h(n,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),v(r,{"title-width":"180",field:"windowPhase",title:"窗口期",span:16,"item-render":{}},{default:w((({data:e})=>[v(u,{modelValue:e.windowPhaseStartDate,"onUpdate:modelValue":t=>e.windowPhaseStartDate=t,type:"datetime",style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"]),x(" 至 "),v(u,{modelValue:e.windowPhaseEndDate,"onUpdate:modelValue":t=>e.windowPhaseEndDate=t,type:"datetime",style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data","rules"]),v(m,{"title-align":"right","title-width":"100"},{default:w((()=>[v(r,{title:"补偿方案信息","title-align":"left","title-width":200,span:3,"title-prefix":{icon:"vxe-icon-comment"}}),v(r,{span:12},{default:w((()=>[v(f,{status:"primary",onClick:i[0]||(i[0]=e=>P(d).showPlanSelector=!0)},{default:w((()=>[x("添加方案")])),_:1})])),_:1})])),_:1}),v(E,{activeKey:P(a),"onUpdate:activeKey":i[1]||(i[1]=e=>D(a)?a.value=e:null),type:"editable-card","hide-add":"",onEdit:i[2]||(i[2]=e=>P(R)("按tab删除所有数据")),style:{"margin-top":"10px"}},{default:w((()=>[v(U,{key:"1",tab:"进口商"},{default:w((()=>[v(O,C({ref:"xGrid"},P(s)),null,16)])),_:1}),v(U,{key:"2",tab:"渠道"},{default:w((()=>[v(O,C({ref:"xGrid"},P(N)),null,16)])),_:1}),v(U,{key:"3",tab:"终端"},{default:w((()=>[v(O,C({ref:"xGrid"},P(q)),null,16)])),_:1})])),_:1},8,["activeKey"]),v(m,{"title-align":"right","title-width":"100",rules:P(d).formRules,ref_key:"xForm",ref:l},{default:w((()=>[v(r,{align:"center","title-align":"left",span:24},{default:w((()=>[v(f,{type:"submit",status:"primary",onClick:K},{default:w((()=>[x("提交")])),_:1}),v(f,{type:"submit",status:"primary",onClick:i[3]||(i[3]=e=>P(R)("保存草稿数据，校验必填项"))},{default:w((()=>[x(" 保存草稿 ")])),_:1}),v(f,{onClick:i[4]||(i[4]=e=>P(G)(P(t),"c-payment-inventory"))},{default:w((()=>[x("返回列表")])),_:1})])),_:1})])),_:1},8,["rules"]),v($,{modelValue:P(d).showPlanSelector,"onUpdate:modelValue":i[8]||(i[8]=e=>P(d).showPlanSelector=e),title:"选择中标价&出厂价同时下调补偿方案",width:"80%","min-width":"600","min-height":"300",resize:"","destroy-on-close":""},{default:w((()=>[v(O,V(k(P(F))),{search_operation:w((()=>[v(f,{status:"primary",onClick:i[5]||(i[5]=e=>P(R)("审批通过的，类型为中标价&出厂价同时下调的补偿方案"))},{default:w((()=>[x(" 搜索 ")])),_:1})])),toolbar_buttons:w((()=>[v(M,null,{default:w((()=>[x("进口商")])),_:1}),v(M,null,{default:w((()=>[x("渠道")])),_:1}),v(M,null,{default:w((()=>[x("终端")])),_:1}),v(f,{status:"primary",style:{"margin-left":"12px"},onClick:i[6]||(i[6]=e=>P(R)("选择一条；将明细带回"))},{default:w((()=>[x(" 确认选择 ")])),_:1})])),operations:w((()=>[v(f,{status:"danger",onClick:i[7]||(i[7]=e=>P(R)("直接删除"))},{default:w((()=>[x("删除")])),_:1})])),_:1},16)])),_:1},8,["modelValue"])])),_:1})}}}),[["__file","C:/Users/ThinkPad/source/Bonbonniere/bonbon-vue/src/views/c-payment/PairReduceCreator.vue"]]);export{q as default};
