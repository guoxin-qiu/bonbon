var e=Object.defineProperty,t=Object.defineProperties,l=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,n=(t,l,i)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[l]=i,o=(e,t)=>{for(var l in t||(t={}))a.call(t,l)&&n(e,l,t[l]);if(i)for(var l of i(t))d.call(t,l)&&n(e,l,t[l]);return e},r=(e,i)=>t(e,l(i));import{_ as s}from"./index.9b869bd5.js";import{d as p,bn as f,aQ as c,r as u,az as m,b0 as h,bj as w,aV as y,aW as v,aS as b,a as g,aX as _,aR as k,ca as C,ay as S,ac as R,a_ as P,bR as $,cf as V,cg as N,bk as x,bJ as T,cl as D,bK as O,a$ as U}from"./index.44eff430.js";import{c as I,r as A}from"./routerHelper.692f5c09.js";import{g as j,a as G}from"./vxeTableHelper.6baae079.js";import{e as K,t as z,d as E,f as F,h as H,j as q,b as B,q as M}from"./temporary-data.4dfd9cc4.js";import{C as Q,_ as J}from"./CollapsePanel.5cf4e0c3.js";import"./dayjs.min.7438ea6f.js";Q.Panel=J,Q.install=function(e){return e.component(Q.name,Q),e.component(J.name,J),e};const W=x("div",null,T("标记完成：针对流向核验通过、流向核验拒绝、发票核验通过、发票核验拒绝的数据\n                清除完成标记：将完成标记置为空即可\n                标记完成状态下的数据，商务不可修改"),-1),X=x("div",null,T("流向核验通过：针对未修改、已修改、已提交、流向核验拒绝的数据，且数据完整（一级商业、补偿方案等有效）\n                流向核验拒绝：针对未修改、已修改、已提交、流向核验通过的数据"),-1),L=x("div",null,T("发票核验可以与数据核验一起"),-1),Y=U(p({__name:"BidPriceReduceCalculate",setup(e){const t=f(),l=c(),i=I(t,"c-payment-inventory-calculate"),a=I(t,"c-payment-inventory-check-calculate"),d=I(t,"c-payment-inventory-ready-for-finance"),n=I(t,"c-payment-inventory-confirm-calculate"),p=I(t,"c-payment-inventory-confirmed"),x=u(),T=u([]),U=u("1"),Y=u("1"),Z=[...K.filter((e=>"退货流向"!==e.type)).concat(z),r(o({},K.find((e=>"退货流向"===e.type))),{biddingPrice:"",basePrice:"",gross:""})],ee=m({formData:{chineseName:"",englishName:"",inventoryCompensationScenario:"",inventoryCompensationType:"",t1t2Ref:"",periodStart:"",periodEnd:"",period:void 0,windowPhaseStartDate:"",windowPhaseEndDate:"",openClose:""},showOffsetSalesSelector:!1,showT1Selector:!1,showVoucherNoSelector:!1,showReturnSalesSelector:!1,showPlanSelector:!1,showTerminalInventorySelector:!1,showApprovalDataSelector:!1,showApprovalInvoiceSelector:!1,showApprovalOKSelector:!1,showInvoiceSelector:!1,showFinanceSelector:!1,showAppealSelector:!1});ee.formData=o(o({},ee.formData),{chineseName:"单中标价下调库存结算报告",englishName:"Single winning price downward inventory settlement report",inventoryCompensationScenario:"单中标价下调",inventoryCompensationType:"库存补偿",t1t2Ref:"2022Q4",periodStart:"2022-05-01",periodEnd:"2022-10-31",windowPhaseStartDate:"2022-11-12",windowPhaseEndDate:"2022-12-11",openClose:"未开启"});const te=m(r(o({},j("scopeGrid")),{data:E,pagerConfig:void 0,toolbarConfig:void 0,columns:[{field:"province",title:"买方省份"},{field:"city",title:"买方城市"},{field:"skuCode",title:"产品编码"},{field:"skuName",title:"产品名称",width:300}]})),le=m(r(o({},j("offsetSalesGrid")),{data:K.filter((e=>"冲差流向"===e.type)),pagerConfig:void 0,showHeaderOverflow:!0,formConfig:{items:[{field:"salesDateFrom",span:4,itemRender:{name:"$input",props:{type:"date",placeholder:"销售日期从"}}},{field:"salesDateTo",span:4,itemRender:{name:"$input",props:{type:"date",placeholder:"销售日期到"}}},{field:"sku",span:4,itemRender:{name:"$select",options:[],props:{placeholder:"产品编码或名称"}}},{field:"buyer",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"买方编码或名称"}}},{field:"buyerType",span:4,folding:!0,itemRender:{name:"$select",options:[{value:"医院",label:"医院"},{value:"药店",label:"药店"}],props:{placeholder:"买方类型"}}},{field:"buyerProvince",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"买方省"}}},{field:"buyerCity",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"买方城市"}}},{field:"seller",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"卖方编码或名称"}}},{field:"sellerType",span:4,folding:!0,itemRender:{name:"$select",options:[{value:"分销商",label:"分销商"},{value:"药店",label:"药店"}],props:{placeholder:"卖方类型"}}},{field:"sellerProvince",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"卖方省"}}},{field:"sellerCity",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"卖方城市"}}},{field:"itemType",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"单据类型"}}},{field:"invoiceNo",span:4,folding:!0,itemRender:{name:"$input",props:{placeholder:"发票号"}}},{field:"t1",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"一级商业"}}},{field:"voucherNo",span:4,folding:!0,itemRender:{name:"$input",props:{placeholder:"凭证发票号"}}},{field:"batchNo",span:4,folding:!0,itemRender:{name:"$input",props:{placeholder:"批号"}}},{field:"shouldCheck",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"是否抽查发票"}}},{field:"status",span:4,itemRender:{name:"$select",options:[],props:{placeholder:"数据状态"}}},{span:8,align:"center",collapseNode:!0,itemRender:{name:"$buttons",children:[{props:{type:"submit",content:"搜索",status:"primary"}},{props:{type:"reset",content:"清空"}}]}}]},columns:[{field:"checkbox",type:"checkbox",width:50,align:"center",fixed:"left"},{field:"salesDate",title:"销售日期",width:100},{field:"skuCode",title:"产品编码",width:100},{field:"skuName",title:"产品名称",width:200},{field:"quantity",title:"数量",width:100},{field:"price",title:"价格",width:100,titlePrefix:{content:"流向数据中的哪个字段？"}},{field:"itemType",title:"单据类型",width:100},{field:"buyerCode",title:"买方编码",width:100},{field:"buyerName",title:"买方名称",width:100},{field:"buyerProvince",title:"买方省份",width:100},{field:"buyerCity",title:"买方城市",width:100},{field:"buyerType",title:"买方类型",width:100},{field:"buyerProperty",title:"买方性质",width:100},{field:"sellerCode",title:"卖方编码",width:100},{field:"sellerName",title:"卖方名称",width:100},{field:"sellerProvince",title:"卖方省份",width:100},{field:"sellerType",title:"卖方类型",width:100},{field:"sellerProperty",title:"卖方性质",width:100},{field:"batchNo",title:"批号",width:100},{field:"invoiceNo",title:"发票号",width:100},{field:"t1",title:"一级商业",width:100},{field:"voucherNo",title:"凭证发票号",width:100},{field:"planId",title:"补偿方案ID",width:100},{field:"planName",title:"补偿方案名称",width:200},{field:"biddingPrice",title:"中标价",width:100},{field:"basePrice",title:"一级商底价",width:100},{field:"gross",title:"毛利率",width:100},{field:"unitPrice",title:"补偿单价",width:100},{field:"cPrice",title:"补偿金额",width:100},{field:"shouldCheck",title:"是否抽查发票",width:120},{field:"approvalComment",title:"数据核验意见",width:120},{field:"approvalComment",title:"发票核验意见",width:120},{field:"appealReason",title:"申诉原因",width:100},{field:"status",title:"数据状态",width:100,fixed:a||i?"right":void 0},{title:"操作",align:"center",fixed:"right",width:160,visible:a||i,slots:{default:"operations"}}]})),ie=m(r(o({},j("selectOffsetSalesGrid")),{data:F,pagerConfig:void 0,showHeaderOverflow:!0,formConfig:{items:[{field:"salesDateFrom",span:4,itemRender:{name:"$input",props:{type:"date",placeholder:"销售日期从"}}},{field:"salesDateTo",span:4,itemRender:{name:"$input",props:{type:"date",placeholder:"销售日期到"}}},{field:"sku",span:4,itemRender:{name:"$select",options:[],props:{placeholder:"产品编码或名称"}}},{field:"buyer",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"买方编码或名称"}}},{field:"buyerType",span:4,folding:!0,itemRender:{name:"$select",options:[{value:"医院",label:"医院"},{value:"药店",label:"药店"}],props:{placeholder:"买方类型"}}},{field:"isRefDrugstore",span:4,folding:!0,title:"关联药店",itemRender:{name:"$checkbox"}},{field:"buyerProvince",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"买方省"}}},{field:"buyerCity",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"买方城市"}}},{field:"seller",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"卖方编码或名称"}}},{field:"sellerType",span:4,folding:!0,itemRender:{name:"$select",options:[{value:"分销商",label:"分销商"},{value:"药店",label:"药店"}],props:{placeholder:"卖方类型"}}},{field:"sellerProvince",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"卖方省"}}},{field:"sellerCity",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"卖方城市"}}},{field:"itemType",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"单据类型"}}},{field:"invoiceNo",span:4,folding:!0,itemRender:{name:"$input",props:{placeholder:"发票号"}}},{field:"batchNo",span:4,folding:!0,itemRender:{name:"$input",props:{placeholder:"批号"}}},{field:"preMatch",span:4,title:"注意",titlePrefix:{content:"选择是，列表加载流向池已预筛选的内容。先择否，则从销量明细中查询。预筛选的数据的销售日期范围是结算报告的开始日期到结束日期的下个月月末。"},itemRender:{name:"$select",options:[{value:"是",label:"是"},{value:"否",label:"否"}],props:{placeholder:"系统预筛选"}}},{field:"isSelected",span:4,folding:!0,itemRender:{name:"$select",options:[{value:"未选择",label:"未选择"}],props:{placeholder:"是否已选择"}}},{span:8,align:"center",collapseNode:!0,itemRender:{},slots:{default:"search_operation"}}]},columns:[{field:"checkbox",type:"checkbox",width:50,align:"center",fixed:"left"},{field:"salesDate",title:"销售日期",width:100},{field:"skuCode",title:"产品编码",width:100},{field:"skuName",title:"产品名称",width:180},{field:"quantity",title:"数量",width:100},{field:"price",title:"价格",width:100},{field:"itemType",title:"单据类型",width:100},{field:"buyerCode",title:"买方编码",width:100},{field:"buyerName",title:"买方名称",width:100},{field:"buyerProvince",title:"买方省份",width:100},{field:"buyerCity",title:"买方城市",width:100},{field:"buyerType",title:"买方类型",width:100},{field:"buyerProperty",title:"买方性质",width:100},{field:"sellerCode",title:"卖方编码",width:100},{field:"sellerName",title:"卖方名称",width:100},{field:"sellerProvince",title:"卖方省份",width:100},{field:"sellerType",title:"卖方类型",width:100},{field:"sellerProperty",title:"卖方性质",width:100},{field:"batchNo",title:"批号",width:100},{field:"invoiceNo",title:"发票号",width:100},{field:"isPreMatch",title:"系统预筛选",width:100},{field:"isSelected",title:"已选择",width:100,visible:!1}],checkboxConfig:{highlight:!0,range:!0,checkMethod:({row:e})=>!e.isSelected}})),ae=m(r(o({},j("returnSalesGrid")),{data:K.filter((e=>"退货流向"===e.type)),pagerConfig:void 0,showHeaderOverflow:!0,formConfig:{items:[{field:"salesDateFrom",span:4,itemRender:{name:"$input",props:{type:"date",placeholder:"销售日期从"}}},{field:"salesDateTo",span:4,itemRender:{name:"$input",props:{type:"date",placeholder:"销售日期到"}}},{field:"sku",span:4,itemRender:{name:"$select",options:[],props:{placeholder:"产品编码或名称"}}},{field:"buyer",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"买方编码或名称"}}},{field:"buyerType",span:4,folding:!0,itemRender:{name:"$select",options:[{value:"医院",label:"医院"},{value:"药店",label:"药店"}],props:{placeholder:"买方类型"}}},{field:"buyerProvince",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"买方省"}}},{field:"buyerCity",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"买方城市"}}},{field:"seller",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"卖方编码或名称"}}},{field:"sellerType",span:4,folding:!0,itemRender:{name:"$select",options:[{value:"分销商",label:"分销商"},{value:"药店",label:"药店"}],props:{placeholder:"卖方类型"}}},{field:"sellerProvince",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"卖方省"}}},{field:"sellerCity",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"卖方城市"}}},{field:"itemType",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"单据类型"}}},{field:"invoiceNo",span:4,folding:!0,itemRender:{name:"$input",props:{placeholder:"发票号"}}},{field:"t1",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"一级商业"}}},{field:"voucherNo",span:4,folding:!0,itemRender:{name:"$input",props:{placeholder:"凭证发票号"}}},{field:"batchNo",span:4,folding:!0,itemRender:{name:"$input",props:{placeholder:"批号"}}},{field:"shouldCheck",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"是否抽查发票"}}},{field:"status",span:4,itemRender:{name:"$select",options:[],props:{placeholder:"数据状态"}}},{span:8,align:"center",collapseNode:!0,itemRender:{name:"$buttons",children:[{props:{type:"submit",content:"搜索",status:"primary"}},{props:{type:"reset",content:"清空"}}]}}]},columns:[{field:"checkbox",type:"checkbox",width:50,align:"center",fixed:"left"},{field:"salesDate",title:"销售日期",width:100},{field:"skuCode",title:"产品编码",width:100},{field:"skuName",title:"产品名称",width:180},{field:"quantity",title:"数量",width:100},{field:"price",title:"价格",width:100},{field:"itemType",title:"单据类型",width:100},{field:"buyerCode",title:"买方编码",width:100},{field:"buyerName",title:"买方名称",width:100},{field:"buyerProvince",title:"买方省份",width:100},{field:"buyerCity",title:"买方城市",width:100},{field:"buyerType",title:"买方类型",width:100},{field:"buyerProperty",title:"买方性质",width:100},{field:"sellerCode",title:"卖方编码",width:100},{field:"sellerName",title:"卖方名称",width:100},{field:"sellerProvince",title:"卖方省份",width:100},{field:"sellerType",title:"卖方类型",width:100},{field:"sellerProperty",title:"卖方性质",width:100},{field:"batchNo",title:"批号",width:100},{field:"invoiceNo",title:"发票号",width:100},{field:"t1",title:"一级商业",width:100},{field:"voucherNo",title:"凭证发票号",width:100},{field:"planId",title:"新补偿方案ID",width:160},{field:"planName",title:"新补偿方案名称",width:160},{field:"biddingPrice",title:"新补偿方案中标价",width:160},{field:"basePrice",title:"新补偿方案一级商底价",width:200},{field:"gross",title:"新补偿方案毛利率",width:160},{field:"unitPrice",title:"新补偿方案补偿单价",width:180},{field:"planIdOld",title:"旧补偿方案ID",width:160},{field:"planNameOld",title:"旧补偿方案名称",width:160},{field:"biddingPriceOld",title:"旧补偿方案中标价",width:160},{field:"basePriceOld",title:"旧补偿方案一级商底价",width:200},{field:"grossOld",title:"旧补偿方案毛利率",width:160},{field:"unitPriceOld",title:"旧补偿方案补偿单价",width:180},{field:"finalUnitPrice",title:"补偿单价",width:100},{field:"cPrice",title:"补偿金额",width:100},{field:"shouldCheck",title:"抽查发票",width:100},{field:"approvalComment",title:"数据核验意见",width:120},{field:"approvalComment",title:"发票核验意见",width:120},{field:"appealReason",title:"申诉原因",width:100},{field:"status",title:"数据状态",width:100,fixed:a||i?"right":void 0},{title:"操作",align:"center",fixed:"right",width:160,visible:a||i,slots:{default:"operations"}}]})),de=m(r(o({},j("selectOffsetSalesGrid")),{data:F,pagerConfig:void 0,showHeaderOverflow:!0,formConfig:{items:[{field:"salesDateFrom",span:4,itemRender:{name:"$input",props:{type:"date",placeholder:"销售日期从"}}},{field:"salesDateTo",span:4,itemRender:{name:"$input",props:{type:"date",placeholder:"销售日期到"}}},{field:"sku",span:4,itemRender:{name:"$select",options:[],props:{placeholder:"产品编码或名称"}}},{field:"buyer",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"买方编码或名称"}}},{field:"buyerType",span:4,folding:!0,itemRender:{name:"$select",options:[{value:"医院",label:"医院"},{value:"药店",label:"药店"}],props:{placeholder:"买方类型"}}},{field:"isRefDrugstore",span:4,folding:!0,title:"关联药店",itemRender:{name:"$checkbox"}},{field:"buyerProvince",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"买方省"}}},{field:"buyerCity",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"买方城市"}}},{field:"seller",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"卖方编码或名称"}}},{field:"sellerType",span:4,folding:!0,itemRender:{name:"$select",options:[{value:"分销商",label:"分销商"},{value:"药店",label:"药店"}],props:{placeholder:"卖方类型"}}},{field:"sellerProvince",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"卖方省"}}},{field:"sellerCity",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"卖方城市"}}},{field:"itemType",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"单据类型"}}},{field:"invoiceNo",span:4,folding:!0,itemRender:{name:"$input",props:{placeholder:"发票号"}}},{field:"batchNo",span:4,folding:!0,itemRender:{name:"$input",props:{placeholder:"批号"}}},{field:"isSelected",span:4,itemRender:{name:"$select",options:[{value:"未选择",label:"未选择"}],props:{placeholder:"是否已选择"}}},{span:8,align:"center",collapseNode:!0,itemRender:{},slots:{default:"search_operation"}}]},columns:[{field:"checkbox",type:"checkbox",width:50,align:"center",fixed:"left"},{field:"salesDate",title:"销售日期",width:100},{field:"skuCode",title:"产品编码",width:100},{field:"skuName",title:"产品名称",width:180},{field:"quantity",title:"数量",width:100},{field:"price",title:"价格",width:100},{field:"itemType",title:"单据类型",width:100},{field:"buyerCode",title:"买方编码",width:100},{field:"buyerName",title:"买方名称",width:100},{field:"buyerProvince",title:"买方省份",width:100},{field:"buyerCity",title:"买方城市",width:100},{field:"buyerType",title:"买方类型",width:100},{field:"buyerProperty",title:"买方性质",width:100},{field:"sellerCode",title:"卖方编码",width:100},{field:"sellerName",title:"卖方名称",width:100},{field:"sellerProvince",title:"卖方省份",width:100},{field:"sellerType",title:"卖方类型",width:100},{field:"sellerProperty",title:"卖方性质",width:100},{field:"batchNo",title:"批号",width:100},{field:"invoiceNo",title:"发票号",width:100},{field:"isSelected",title:"已选择",width:100,visible:!1}],checkboxConfig:{highlight:!0,range:!0,checkMethod:({row:e})=>!e.isSelected}})),ne=m(r(o({},j("selectPlanGrid")),{data:H,pagerConfig:void 0,showHeaderOverflow:!0,formConfig:{items:[{field:"planDateFrom",span:4,itemRender:{name:"$input",props:{type:"date",placeholder:"补偿开始日期从"}}},{field:"planDateTo",span:4,itemRender:{name:"$input",props:{type:"date",placeholder:"补偿开始日期到"}}},{field:"buyer",span:4,itemRender:{name:"$select",options:[],props:{placeholder:"买方编码或名称"}}},{field:"buyerProvince",span:4,itemRender:{name:"$select",options:[],props:{placeholder:"买方省"}}},{field:"buyerCity",span:4,itemRender:{name:"$select",options:[],props:{placeholder:"买方城市"}}},{span:4,align:"center",itemRender:{},slots:{default:"search_operation"}}]},columns:[{field:"checkbox",type:"radio",width:50,align:"center",fixed:"left"},{field:"planId",title:"补偿方案ID",width:100},{field:"planName",title:"补偿方案名称",width:300},{field:"province",title:"省份",width:100},{field:"city",title:"城市",width:100},{field:"skuCode",title:"产品编码",width:100},{field:"skuName",title:"产品名称",width:180},{field:"buyerCode",title:"买方编码",width:100},{field:"buyerName",title:"买方名称",width:100},{field:"sellerCode",title:"卖方编码",width:100},{field:"sellerName",title:"卖方名称",width:100},{field:"biddingPrice",title:"中标价",width:100},{field:"basePrice",title:"一级商底价",width:100},{field:"gross",title:"毛利率",width:100},{field:"unitPrice",title:"补偿单价",width:100},{field:"planDate",title:"补偿开始日期",width:160,fixed:"right"}],checkboxConfig:{highlight:!0,range:!0,checkMethod:({row:e})=>!e.isSelected}})),oe=m(r(o({},j("terminalInventoryGrid")),{data:z,pagerConfig:void 0,formConfig:{items:[{field:"inventoryDateStart",span:4,itemRender:{name:"$input",props:{type:"date",placeholder:"库存日期从"}}},{field:"inventoryDateEnd",span:4,itemRender:{name:"$input",props:{type:"date",placeholder:"库存日期到"}}},{field:"sku",span:4,itemRender:{name:"$select",options:[],props:{placeholder:"产品编码或名称"}}},{field:"dealer",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"库存商业编码或名称"}}},{field:"province",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"省份"}}},{field:"batchNo",span:4,folding:!0,itemRender:{name:"$input",props:{placeholder:"批号"}}},{field:"status",span:4,itemRender:{name:"$select",options:[],props:{placeholder:"数据状态"}}},{field:"shouldCheck",span:4,folding:!0,itemRender:{name:"$select",options:[],props:{placeholder:"是否抽查发票"}}},{span:8,align:"center",collapseNode:!0,itemRender:{name:"$buttons",children:[{props:{type:"submit",content:"搜索",status:"primary"}},{props:{type:"reset",content:"清空"}}]}}]},columns:[{field:"checkbox",type:"checkbox",width:50,align:"center",fixed:"left"},{field:"inventoryDate",title:"库存日期",width:100},{field:"skuCode",title:"产品编码",width:100},{field:"skuName",title:"产品名称",width:180},{field:"buyerProvince",title:"省份",width:100},{field:"t1",title:"一级商业",width:100},{field:"sellerCode",title:"库存商业编码",width:150},{field:"sellerName",title:"库存商业名称",width:150},{field:"inventoryNum",title:"库存数量",width:100},{field:"inventoryStatus",title:"库存状态",width:100},{field:"batchNo",title:"批号",width:100},{field:"StocktakingDate",title:"盘库日期",width:100},{field:"reduceDate",title:"降价日期",width:100},{field:"planId",title:"新补偿方案ID",width:160},{field:"planName",title:"新补偿方案名称",width:160},{field:"biddingPriceNew",title:"新补偿方案中标价",width:160},{field:"basePriceNew",title:"新补偿方案一级商底价",width:200},{field:"grossNew",title:"新补偿方案毛利率",width:160},{field:"unitPriceNew",title:"新补偿方案补偿单价",width:180},{field:"planIdOld",title:"旧补偿方案ID",width:160},{field:"planNameOld",title:"旧补偿方案名称",width:160},{field:"biddingPriceOld",title:"旧补偿方案中标价",width:160},{field:"basePriceOld",title:"旧补偿方案一级商底价",width:200},{field:"grossOld",title:"旧补偿方案毛利率",width:160},{field:"unitPriceOld",title:"旧补偿方案补偿单价",width:180},{field:"unitPrice",title:"补偿单价",width:100},{field:"cPrice",title:"补偿金额",width:100},{field:"shouldCheck",title:"是否抽查发票",width:120},{field:"approvalComment",title:"数据核验意见",width:120},{field:"approvalComment",title:"发票核验意见",width:120},{field:"appealReason",title:"申诉原因",width:100},{field:"status",title:"数据状态",width:100,fixed:a||i?"right":void 0},{title:"操作",align:"center",width:220,fixed:"right",visible:a||i,slots:{default:"operations"}}]})),re=m(r(o({},j("sumBySellerGrid")),{data:Z,pagerConfig:void 0,showHeaderOverflow:!0,formConfig:{items:[{field:"sku",span:4,itemRender:{name:"$select",options:[],props:{placeholder:"产品编码或名称"}}},{field:"buyerProvince",span:4,itemRender:{name:"$select",options:[],props:{placeholder:"买方省"}}},{field:"seller",span:4,itemRender:{name:"$select",options:[],props:{placeholder:"卖方编码或名称"}}},{field:"t1",span:4,itemRender:{name:"$select",options:[],props:{placeholder:"一级商业"}}},{span:8,align:"center",itemRender:{name:"$buttons",children:[{props:{type:"submit",content:"搜索",status:"primary"}},{props:{type:"reset",content:"清空"}}]}}]},columns:[{field:"type",title:"数据类型",width:100},{field:"buyerProvince",title:"买方省份",width:100},{field:"paymentObject",title:"支付对象",width:100},{field:"t1",title:"一级商业",width:200},{field:"sellerCode",title:"卖方编码",width:100},{field:"sellerName",title:"卖方名称",width:200},{field:"sellerProvince",title:"卖方省份",width:100},{field:"skuCode",title:"产品编码",width:100},{field:"skuName",title:"产品名称",width:200},{field:"biddingPrice",title:"中标价",width:100},{field:"basePrice",title:"一级商底价",width:100},{field:"gross",title:"毛利率",width:100},{field:"unitPrice",title:"补偿单价",width:100},{field:"quantity",title:"数量",width:100},{field:"cPrice",title:"补偿金额",width:100}]})),se=m(r(o({},j("sumByT1Grid")),{data:Z,pagerConfig:void 0,showHeaderOverflow:!0,formConfig:{items:[{field:"sku",span:4,itemRender:{name:"$select",options:[],props:{placeholder:"产品编码或名称"}}},{field:"buyerProvince",span:4,itemRender:{name:"$select",options:[],props:{placeholder:"买方省"}}},{field:"t1",span:4,itemRender:{name:"$select",options:[],props:{placeholder:"一级商业"}}},{span:8,align:"center",itemRender:{name:"$buttons",children:[{props:{type:"submit",content:"搜索",status:"primary"}},{props:{type:"reset",content:"清空"}}]}}]},columns:[{field:"type",title:"数据类型",width:100},{field:"sellerProvince",title:"卖方省份",width:100},{field:"buyerProvince",title:"买方省份",width:100},{field:"paymentObject",title:"支付对象",width:100},{field:"t1",title:"一级商业",width:200},{field:"skuCode",title:"产品编码",width:100},{field:"skuName",title:"产品名称",width:200},{field:"biddingPrice",title:"中标价",width:100},{field:"basePrice",title:"一级商底价",width:100},{field:"gross",title:"毛利率",width:100},{field:"unitPrice",title:"补偿单价",width:100},{field:"quantity",title:"数量",width:100},{field:"cPrice",title:"补偿金额",width:100}]}));return h((()=>{const{formConfig:e}=le;if(e&&e.items){const t=e.items.find((e=>"status"===e.field));t&&t.itemRender&&(t.itemRender.options=q)}})),(e,t)=>{const o=w("vxe-form-item"),r=w("vxe-option"),f=w("vxe-select"),c=w("vxe-input"),u=w("vxe-grid"),m=J,h=Q,I=w("vxe-form"),j=w("vxe-button"),K=D,z=O,E=w("vxe-modal"),F=w("vxe-textarea"),H=s,q=w("page-container");return y(),v(q,null,{default:b((()=>[g(I,{"title-align":"right","title-width":"100",data:S(ee).formData,ref_key:"xForm",ref:x},{default:b((()=>[g(o,{title:"主要信息","title-align":"left","title-width":200,span:24,"title-prefix":{icon:"vxe-icon-comment"}}),_(' <vxe-form-item\n        title-width="180"\n        field="inventoryCompensationType"\n        title="报告类型"\n        :span="12"\n        :item-render="{}"\n      >\n        <template #default="{ data }">\n          <vxe-select v-model="data.inventoryCompensationType" disabled placeholder="">\n            <vxe-option\n              v-for="item in compensationType"\n              :key="item.value"\n              :value="item.value"\n              :label="item.label"\n            ></vxe-option>\n          </vxe-select>\n        </template>\n      </vxe-form-item> '),g(o,{"title-width":"180",field:"inventoryCompensationScenario",title:"降价类型",span:12,"item-render":{}},{default:b((({data:e})=>[g(f,{modelValue:e.inventoryCompensationScenario,"onUpdate:modelValue":t=>e.inventoryCompensationScenario=t,disabled:"",placeholder:""},{default:b((()=>[(y(!0),k(R,null,C(S(B),(e=>(y(),v(r,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),g(o,{"title-width":"180",field:"chineseName",title:"报告名称（中文）",span:24,"item-render":{}},{default:b((({data:e})=>[g(c,{modelValue:e.chineseName,"onUpdate:modelValue":t=>e.chineseName=t,disabled:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),g(o,{"title-width":"180",field:"englishName",title:"报告名称（英文）",span:24,"item-render":{}},{default:b((({data:e})=>[g(c,{modelValue:e.englishName,"onUpdate:modelValue":t=>e.englishName=t,disabled:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),g(o,{"title-width":"180",field:"t1t2Ref",title:"T1&T2关系",span:8,"item-render":{}},{default:b((({data:e})=>[g(f,{modelValue:e.t1t2Ref,"onUpdate:modelValue":t=>e.t1t2Ref=t,disabled:"",placeholder:""},{default:b((()=>[(y(!0),k(R,null,C(S(M),(e=>(y(),v(r,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),g(o,{"title-width":"180",field:"period",title:"结算周期",span:16,"item-render":{}},{default:b((({data:e})=>[g(c,{modelValue:e.periodStart,"onUpdate:modelValue":t=>e.periodStart=t,disabled:"",type:"date",style:{width:"150px"}},null,8,["modelValue","onUpdate:modelValue"]),P(" 至 "),g(c,{modelValue:e.periodEnd,"onUpdate:modelValue":t=>e.periodEnd=t,disabled:"",type:"date",style:{width:"150px"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),g(o,{"title-width":"180",field:"windowPhase",title:"窗口期",span:16,"item-render":{}},{default:b((({data:e})=>[g(c,{modelValue:e.windowPhaseStartDate,"onUpdate:modelValue":t=>e.windowPhaseStartDate=t,disabled:"",type:"datetime",style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"]),P(" 至 "),g(c,{modelValue:e.windowPhaseEndDate,"onUpdate:modelValue":t=>e.windowPhaseEndDate=t,disabled:"",type:"datetime",style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),g(o,{"title-width":"180",field:"openClose",title:"流向申请特殊通道","title-prefix":{content:"仅数据团队可见"},span:16,"item-render":{}},{default:b((({data:e})=>[g(c,{modelValue:e.openClose,"onUpdate:modelValue":t=>e.openClose=t,disabled:"",style:{width:"150px"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),g(o,{"title-width":"180",title:"区域-产品关系",span:24,"item-render":{},"title-prefix":{content:"商务经理和商务总监只能看到自己负责的省份"}},{default:b((()=>[g(h,{activeKey:S(T),"onUpdate:activeKey":t[0]||(t[0]=e=>$(T)?T.value=e:null),accordion:""},{default:b((()=>[g(m,{key:"1",header:"展开/收起"},{default:b((()=>[g(u,V({ref:"xGrid"},S(te)),null,16)])),_:1})])),_:1},8,["activeKey"])])),_:1})])),_:1},8,["data"]),g(I,{"title-align":"right","title-width":"100",style:{"margin-top":"10px"}},{default:b((()=>[g(o,{title:"流向及库存数据","title-align":"left","title-width":160,span:24,"title-prefix":{icon:"vxe-icon-comment"}},{default:b((()=>[S(a)||S(i)?_("v-if",!0):(y(),v(j,{key:0,onClick:t[1]||(t[1]=e=>S(G)("商务经理和商务总监根据各自省份权限查看和下载汇总数据"))},{default:b((()=>[P(" 下载汇总数据 ")])),_:1})),S(d)||S(p)?(y(),v(j,{key:1,onClick:t[2]||(t[2]=e=>S(G)("商务和商务总监不可见").then((()=>{S(ee).showFinanceSelector=!0})))},{default:b((()=>[P(" 财务审核凭证 ")])),_:1})):_("v-if",!0)])),_:1})])),_:1}),g(z,{activeKey:S(Y),"onUpdate:activeKey":t[46]||(t[46]=e=>$(Y)?Y.value=e:null),type:"card"},{default:b((()=>[S(i)||S(a)?_("v-if",!0):(y(),v(K,{key:"3",tab:"汇总至一级商"},{default:b((()=>[g(u,V({ref:"sumByT1Grid"},S(se)),null,16)])),_:1})),S(i)||S(a)?_("v-if",!0):(y(),v(K,{key:"2",tab:"汇总至卖方"},{default:b((()=>[g(u,V({ref:"sumBySellerGrid"},S(re)),null,16)])),_:1})),g(K,{key:"1",tab:"明细数据"},{default:b((()=>[g(z,{activeKey:S(U),"onUpdate:activeKey":t[45]||(t[45]=e=>$(U)?U.value=e:null),type:"card"},{default:b((()=>[g(K,{key:"1",tab:"冲差流向"},{default:b((()=>[g(u,V({ref:"offsetSalesGrid"},S(le)),{toolbar_buttons:b((()=>[S(i)?(y(),v(j,{key:0,status:"primary",onClick:t[3]||(t[3]=e=>S(ee).showOffsetSalesSelector=!0)},{default:b((()=>[P(" 选择冲差流向 ")])),_:1})):_("v-if",!0),S(a)||S(i)?(y(),v(j,{key:1,status:"primary",onClick:t[4]||(t[4]=e=>S(ee).showT1Selector=!0)},{default:b((()=>[P(" 更新一级商 ")])),_:1})):_("v-if",!0),S(i)||S(a)?(y(),v(j,{key:2,status:"primary",onClick:t[5]||(t[5]=()=>{S(G)("只能单条更新").then((()=>{S(ee).showVoucherNoSelector=!0}))})},{default:b((()=>[P(" 填写凭证发票号 ")])),_:1})):_("v-if",!0),S(a)||S(i)?(y(),v(j,{key:3,status:"primary",onClick:t[6]||(t[6]=()=>{S(G)("仅单条更新。\n                      若要批量更新，请给出系统校验规则。").then((()=>{S(ee).showPlanSelector=!0}))})},{default:b((()=>[P(" 更新补偿方案 ")])),_:1})):_("v-if",!0),g(j,{onClick:t[7]||(t[7]=e=>S(G)("下载全部冲差流向数据，包括填写的内容和状态"))},{default:b((()=>[P(" 下载数据 ")])),_:1}),S(a)||S(i)?(y(),v(j,{key:4,status:"primary",onClick:t[8]||(t[8]=e=>S(G)("系统仅计算总金额，不保存到数据库\n              根据角色可见数据范围进行sum"))},{default:b((()=>[P(" 试算 ")])),_:1})):_("v-if",!0),g(j,{onClick:t[9]||(t[9]=e=>S(ee).showInvoiceSelector=!0)},{default:b((()=>[P("发票信息")])),_:1}),S(i)?(y(),v(j,{key:5,status:"primary",onClick:t[10]||(t[10]=e=>S(G)("提交可以根据勾选情况或查询条件来做批量提交\n                  如果冲差流向不是成对出现（加和不为零？）则需要给出提交失败提示"))},{default:b((()=>[P(" 提交 ")])),_:1})):_("v-if",!0),S(a)?(y(),v(j,{key:6,status:"warning",onClick:t[11]||(t[11]=e=>S(G)("勾选数据，点击后确认要抽查发票，数据中的抽查发票=是"))},{default:b((()=>[P(" 抽查发票 ")])),_:1})):_("v-if",!0),S(a)?(y(),v(j,{key:7,status:"warning",onClick:t[12]||(t[12]=e=>S(G)("勾选数据，不勾选则按查询条件").then((()=>S(ee).showApprovalDataSelector=!0)))},{default:b((()=>[P(" 核验数据 ")])),_:1})):_("v-if",!0),S(a)?(y(),v(j,{key:8,status:"warning",onClick:t[13]||(t[13]=e=>S(G)("勾选数据，不勾选则按查询条件").then((()=>S(ee).showApprovalInvoiceSelector=!0)))},{default:b((()=>[P(" 核验发票 ")])),_:1})):_("v-if",!0),S(a)?(y(),v(j,{key:9,status:"warning",onClick:t[14]||(t[14]=e=>S(G)("勾选数据，不勾选则按查询条件").then((()=>S(ee).showApprovalOKSelector=!0)))},{default:b((()=>[P(" 标记完成 ")])),_:1})):_("v-if",!0)])),operations:b((()=>[S(i)?(y(),v(j,{key:0,status:"danger",onClick:t[15]||(t[15]=e=>S(G)("原则上应该成对删除，保持逻辑简单，删除时不校验，提交时校验"))},{default:b((()=>[P(" 删除 ")])),_:1})):_("v-if",!0),S(i)?(y(),v(j,{key:1,status:"primary",onClick:t[16]||(t[16]=e=>S(G)("只有商务才使用此按钮，只有数据核验或发票核验被拒绝的数据，并且没有编辑完成，才能使用申诉功能").then((()=>S(ee).showAppealSelector=!0)))},{default:b((()=>[P(" 申诉 ")])),_:1})):_("v-if",!0)])),_:1},16)])),_:1}),g(K,{key:"2",tab:"退货流向"},{default:b((()=>[g(u,V({ref:"offsetSalesGrid"},S(ae)),{toolbar_buttons:b((()=>[S(i)?(y(),v(j,{key:0,status:"primary",onClick:t[17]||(t[17]=e=>S(ee).showReturnSalesSelector=!0)},{default:b((()=>[P(" 选择退货流向 ")])),_:1})):_("v-if",!0),S(a)||S(i)?(y(),v(j,{key:1,status:"primary",onClick:t[18]||(t[18]=e=>S(ee).showT1Selector=!0)},{default:b((()=>[P(" 更新一级商 ")])),_:1})):_("v-if",!0),S(i)||S(a)?(y(),v(j,{key:2,status:"primary",onClick:t[19]||(t[19]=()=>{S(G)("只能单条更新").then((()=>{S(ee).showVoucherNoSelector=!0}))})},{default:b((()=>[P(" 填写凭证发票号 ")])),_:1})):_("v-if",!0),S(a)||S(i)?(y(),v(j,{key:3,status:"primary",onClick:t[20]||(t[20]=()=>{S(G)("仅单条更新。\n                      若要批量更新，请给出系统校验规则。").then((()=>{S(ee).showPlanSelector=!0}))})},{default:b((()=>[P(" 更新补偿方案 ")])),_:1})):_("v-if",!0),g(j,{onClick:t[21]||(t[21]=e=>S(G)("下载全部退货流向数据，包括填写的内容和状态"))},{default:b((()=>[P(" 下载数据 ")])),_:1}),S(a)||S(i)?(y(),v(j,{key:4,status:"primary",onClick:t[22]||(t[22]=e=>S(G)("系统仅计算总金额，不保存到数据库\n              根据角色可见数据范围进行sum"))},{default:b((()=>[P(" 试算 ")])),_:1})):_("v-if",!0),g(j,{onClick:t[23]||(t[23]=e=>S(ee).showInvoiceSelector=!0)},{default:b((()=>[P("发票信息")])),_:1}),S(i)?(y(),v(j,{key:5,status:"primary",onClick:t[24]||(t[24]=e=>S(G)("提交可以根据勾选情况或查询条件来做批量提交\n                  如果退货流向的数量不是负数，则需要给出提交失败提示"))},{default:b((()=>[P(" 提交 ")])),_:1})):_("v-if",!0),S(a)?(y(),v(j,{key:6,status:"warning",onClick:t[25]||(t[25]=e=>S(G)("勾选数据，点击后确认要抽查发票，数据中的抽查发票=是"))},{default:b((()=>[P(" 抽查发票 ")])),_:1})):_("v-if",!0),S(a)?(y(),v(j,{key:7,status:"warning",onClick:t[26]||(t[26]=e=>S(G)("勾选数据，不勾选则按查询条件").then((()=>S(ee).showApprovalDataSelector=!0)))},{default:b((()=>[P(" 核验数据 ")])),_:1})):_("v-if",!0),S(a)?(y(),v(j,{key:8,status:"warning",onClick:t[27]||(t[27]=e=>S(G)("勾选数据，不勾选则按查询条件").then((()=>S(ee).showApprovalInvoiceSelector=!0)))},{default:b((()=>[P(" 核验发票 ")])),_:1})):_("v-if",!0),S(a)?(y(),v(j,{key:9,status:"warning",onClick:t[28]||(t[28]=e=>S(G)("勾选数据，不勾选则按查询条件").then((()=>S(ee).showApprovalOKSelector=!0)))},{default:b((()=>[P(" 标记完成 ")])),_:1})):_("v-if",!0)])),operations:b((()=>[S(i)?(y(),v(j,{key:0,status:"danger",onClick:t[29]||(t[29]=e=>S(G)("直接删除"))},{default:b((()=>[P(" 删除 ")])),_:1})):_("v-if",!0),S(i)?(y(),v(j,{key:1,status:"primary",onClick:t[30]||(t[30]=e=>S(G)("只有商务才使用此按钮\n              只有核验拒绝且未标记为完成的数据，才能使用申诉功能").then((()=>S(ee).showAppealSelector=!0)))},{default:b((()=>[P(" 申诉 ")])),_:1})):_("v-if",!0)])),_:1},16)])),_:1}),g(K,{key:"3",tab:"终端库存"},{default:b((()=>[g(u,V({ref:"terminalInventoryGrid"},S(oe)),{toolbar_buttons:b((()=>[S(i)||S(a)?(y(),v(j,{key:0,status:"primary",onClick:t[31]||(t[31]=e=>S(G)("单中标价下调对零售单店和零售分店进行库存数据的补偿").then((()=>S(ee).showTerminalInventorySelector=!0)))},{default:b((()=>[P(" 添加终端库存 ")])),_:1})):_("v-if",!0),S(a)||S(i)?(y(),v(j,{key:1,status:"primary",onClick:t[32]||(t[32]=e=>S(ee).showT1Selector=!0)},{default:b((()=>[P(" 更新一级商 ")])),_:1})):_("v-if",!0),S(a)||S(i)?(y(),v(j,{key:2,status:"primary",onClick:t[33]||(t[33]=()=>{S(G)("只能单条更新").then((()=>{S(ee).showPlanSelector=!0}))})},{default:b((()=>[P(" 更新补偿方案 ")])),_:1})):_("v-if",!0),g(j,{onClick:t[34]||(t[34]=e=>S(G)("下载全部终端库存数据，包括填写的内容和状态"))},{default:b((()=>[P(" 下载数据 ")])),_:1}),S(a)||S(i)?(y(),v(j,{key:3,status:"primary",onClick:t[35]||(t[35]=e=>S(G)("系统仅计算总金额，不保存到数据库\n              根据角色可见数据范围进行sum"))},{default:b((()=>[P(" 试算 ")])),_:1})):_("v-if",!0),g(j,{onClick:t[36]||(t[36]=e=>S(ee).showInvoiceSelector=!0)},{default:b((()=>[P("发票信息")])),_:1}),S(i)?(y(),v(j,{key:4,status:"primary",onClick:t[37]||(t[37]=e=>S(G)("提交可以根据勾选情况或查询条件来做批量提交"))},{default:b((()=>[P(" 提交 ")])),_:1})):_("v-if",!0),S(a)?(y(),v(j,{key:5,status:"warning",onClick:t[38]||(t[38]=e=>S(G)("勾选数据，点击后确认要抽查发票，数据中的抽查发票=是"))},{default:b((()=>[P(" 抽查发票 ")])),_:1})):_("v-if",!0),S(a)?(y(),v(j,{key:6,status:"warning",onClick:t[39]||(t[39]=e=>S(G)("勾选数据，不勾选则按查询条件").then((()=>S(ee).showApprovalDataSelector=!0)))},{default:b((()=>[P(" 核验数据 ")])),_:1})):_("v-if",!0),S(a)?(y(),v(j,{key:7,status:"warning",onClick:t[40]||(t[40]=e=>S(G)("勾选数据，不勾选则按查询条件").then((()=>S(ee).showApprovalInvoiceSelector=!0)))},{default:b((()=>[P(" 核验发票 ")])),_:1})):_("v-if",!0),S(a)?(y(),v(j,{key:8,status:"warning",onClick:t[41]||(t[41]=e=>S(G)("勾选数据，不勾选则按查询条件").then((()=>S(ee).showApprovalOKSelector=!0)))},{default:b((()=>[P(" 标记完成 ")])),_:1})):_("v-if",!0)])),operations:b((()=>[g(j,{status:"primary",onClick:t[42]||(t[42]=e=>S(G)("只有数据团队才可以编辑；如果商务已经确认，编辑后状态变为未提交"))},{default:b((()=>[P(" 编辑 ")])),_:1}),g(j,{status:"danger",onClick:t[43]||(t[43]=e=>S(G)("只有数据团队才可以删除"))},{default:b((()=>[P(" 删除 ")])),_:1}),S(i)?(y(),v(j,{key:0,status:"primary",onClick:t[44]||(t[44]=e=>S(G)("只有商务才使用此按钮\n              只有核验拒绝且未标记为完成的数据，才能使用申诉功能").then((()=>S(ee).showAppealSelector=!0)))},{default:b((()=>[P(" 申诉 ")])),_:1})):_("v-if",!0)])),_:1},16)])),_:1})])),_:1},8,["activeKey"])])),_:1})])),_:1},8,["activeKey"]),g(I,{"title-align":"right","title-width":"100"},{default:b((()=>[g(o,{align:"center","title-align":"left",span:24},{default:b((()=>[S(a)?(y(),v(j,{key:0,status:"primary",onClick:t[47]||(t[47]=e=>S(G)("如果是商务经理确认阶段，可以将报告撤回至草稿状态（发邮件通知商务），然后调整区域-产品的关系。当重新发布初版后，系统会根据新的区域-产品关系处理已存在的流向数据（enabled=false），保留所有商务经理填写的内容").then((()=>{S(A)(S(l),"c-payment-inventory-edit")})))},{default:b((()=>[P(" 撤回报告 ")])),_:1})):_("v-if",!0),S(a)?(y(),v(j,{key:1,status:"primary",onClick:t[48]||(t[48]=e=>S(G)("如果是商务经理确认阶段，发送提醒邮件给到未完成核查的关联省份的商务经理。\n                提醒内容根据单据状态分为流向提醒和发票提醒。\n                如果是商务总监确认阶段，需要发送给未进行确认的商务总监。"))},{default:b((()=>[P(" 发送邮件提醒 ")])),_:1})):_("v-if",!0),S(a)?(y(),v(j,{key:2,status:"primary",onClick:t[49]||(t[49]=e=>S(G)("窗口期已过，还需要商务继续填补流向时使用\n                第一次点击后，系统记录为开放流向申请，再次点击后，系统记录为关闭流向申请\n                操作成功后，系统提示“状态已更改为：开放/关闭流向申请”"))},{default:b((()=>[P(" 开放流向申请 ")])),_:1})):_("v-if",!0),S(a)?(y(),v(j,{key:3,status:"primary",onClick:t[50]||(t[50]=e=>S(G)("系统校验所有数据状态为标记完成。\n              完成汇总数据的计算，表单状态变更为计算完成，可以进行下载报告供财务审核，上传财务审核凭证等信息\n            汇总至卖方（卖方编码+产品编码+中标价+一级商底价+毛利率+补偿单价+数量的正负）。\n            汇总至一级商（产品编码+中标价+一级商底价+毛利率+补偿单价+数量的正负）。\n            其中，退货流向和终端库存不需要中标价、一级商底价、毛利率，数量都是正数（退货流向的负数要变正），终端库存的客户编码对应卖方编码，终端库存的客户名称对应卖方名称\n            ").then((()=>S(A)(S(l),"c-payment-inventory-ready-for-finance"))))},{default:b((()=>[P(" 正式计算 ")])),_:1})):_("v-if",!0),S(d)?(y(),v(j,{key:4,status:"primary",onClick:t[51]||(t[51]=e=>S(G)("线下完成财务审核，发送提醒邮件给商务总监").then((()=>S(A)(S(l),"c-payment-inventory-confirm-calculate"))))},{default:b((()=>[P(" 发送商务总监确认 ")])),_:1})):_("v-if",!0),S(p)?(y(),v(j,{key:5,status:"primary",onClick:t[52]||(t[52]=e=>S(N).modal.confirm("请检查所有关联附件已上传完成。发布终版后，表单冻结无法修改。").then((e=>{"confirm"===e&&S(G)("当所有的商务总监都确认完成，可以发布终版,表单状态变为待提交审批。\n                发布成功后，会给相关商务经理和商务总监发送“发布终版”通知邮件。\n                ")})))},{default:b((()=>[P(" 发布终版 ")])),_:1})):_("v-if",!0),S(n)?(y(),v(j,{key:6,status:"primary",onClick:t[53]||(t[53]=e=>S(G)("商务总监对数据进行核验").then((()=>S(A)(S(l),"c-payment-inventory-confirmed"))))},{default:b((()=>[P(" 数据确认 ")])),_:1})):_("v-if",!0),g(j,{onClick:t[54]||(t[54]=e=>S(A)(S(l),"c-payment-inventory"))},{default:b((()=>[P("返回列表")])),_:1})])),_:1})])),_:1}),g(E,{modelValue:S(ee).showOffsetSalesSelector,"onUpdate:modelValue":t[57]||(t[57]=e=>S(ee).showOffsetSalesSelector=e),title:"选择冲差流向",width:"90%","min-width":"600","min-height":"300",resize:"","destroy-on-close":""},{default:b((()=>[g(u,V({ref:"selectOffsetSalesGrid"},S(ie)),{toolbar_buttons:b((()=>[g(j,{status:"primary",onClick:t[55]||(t[55]=e=>S(G)("从业务角度，冲差数据要成对选择，但为了减少程序的复杂度，此处不判断是否成对，待结算数据提交时校验\n                  点击确认后，系统自动匹配招标补偿方案，根据[销售日期]+[产品]+[买方编码]+[买方省份]+[买方城市]+[卖方编码]+[审批通过]匹配到的方案是新方案，新方案的前一个有效方案叫旧方案\n                  负数流向（退）匹配旧方案，正数流向（进）匹配新方案\n                  "))},{default:b((()=>[P(" 确认选择冲差流向 ")])),_:1})])),search_operation:b((()=>[g(j,{type:"submit",status:"primary",onClick:t[56]||(t[56]=e=>S(G)("产品和省份的范围与结算报告中的区域-产品关系一致，并且隐含买方类型是医院+药店的筛选条件\n                  默认显示预筛选的数据【需设计】\n                  已选择的流向数据需要标记一下，变成不可选状态\n                  自动筛选流向数据逻辑：系统首先根据补偿报告选择的产品，周期，省份，城市（如果有）筛选流向数据，再将同一天，同一产品，同买方，同卖方，销量为正负冲消的且流向价格不相等的流向数据添加到页面流向池内，供商务经理选择"))},{default:b((()=>[P(" 搜索 ")])),_:1}),g(j,{type:"reset"},{default:b((()=>[P("清空")])),_:1})])),_:1},16)])),_:1},8,["modelValue"]),g(E,{modelValue:S(ee).showT1Selector,"onUpdate:modelValue":t[60]||(t[60]=e=>S(ee).showT1Selector=e),title:"更新一级商","min-width":"600","min-height":"300",resize:"","destroy-on-close":""},{default:b((()=>[g(I,{"title-align":"right","title-width":"100",onSubmit:t[59]||(t[59]=e=>S(ee).showT1Selector=!1)},{default:b((()=>[g(o,{field:"t1Selector",title:"一级商",span:20,"item-render":{}},{default:b((()=>[g(f,{transfer:""})])),_:1}),g(o,{title:"备注",span:20,"item-render":{}},{default:b((()=>[g(F)])),_:1}),g(o,{align:"center","title-align":"left",span:24},{default:b((()=>[g(j,{type:"submit",status:"primary",onClick:t[58]||(t[58]=e=>S(G)("如果有勾选，则更新勾选数据的一级商\n                    如果没有勾选，则会按照查询条件批量更新所有符合的数据\n                    核验通过状态的数据不能更新"))},{default:b((()=>[P(" 确认更新一级商 ")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),g(E,{modelValue:S(ee).showVoucherNoSelector,"onUpdate:modelValue":t[63]||(t[63]=e=>S(ee).showVoucherNoSelector=e),title:"填写凭证发票号","min-width":"600","min-height":"300",resize:"","destroy-on-close":""},{default:b((()=>[g(I,{"title-align":"right","title-width":"100",onSubmit:t[62]||(t[62]=e=>S(ee).showVoucherNoSelector=!1)},{default:b((()=>[g(o,{title:"销售日期",span:20,"item-render":{}},{default:b((()=>[g(c,{disabled:"","model-value":"2022-07-08"})])),_:1}),g(o,{title:"产品名称",span:20,"item-render":{}},{default:b((()=>[g(c,{disabled:"","model-value":"大扶康 胶囊 150毫克x1"})])),_:1}),g(o,{title:"批号",span:20,"item-render":{}},{default:b((()=>[g(c,{disabled:"","model-value":"1234567"})])),_:1}),g(o,{title:"发票号",span:20,"item-render":{}},{default:b((()=>[g(c,{disabled:"","model-value":"04871356"})])),_:1}),g(o,{field:"voucherNo",title:"凭证发票号",span:20,"item-render":{}},{default:b((()=>[g(c)])),_:1}),g(o,{align:"center","title-align":"left",span:24},{default:b((()=>[g(j,{type:"submit",status:"primary",onClick:t[61]||(t[61]=e=>S(G)("单条更新，无需合法校验"))},{default:b((()=>[P(" 确认填写凭证发票号 ")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),g(E,{modelValue:S(ee).showReturnSalesSelector,"onUpdate:modelValue":t[66]||(t[66]=e=>S(ee).showReturnSalesSelector=e),title:"选择退货流向",width:"90%","min-width":"600","min-height":"300",resize:"","destroy-on-close":""},{default:b((()=>[g(u,V({ref:"selectReturnSalesGrid"},S(de)),{toolbar_buttons:b((()=>[g(j,{status:"primary",onClick:t[64]||(t[64]=e=>S(G)("必须都是负数流向\n                  点击确认后，系统自动匹配招标补偿方案，根据[销售日期]+[产品]+[买方编码]+[买方省份]+[买方城市]+[卖方编码]+[审批通过]匹配到的方案是新方案，新方案的前一个有效方案叫旧方案\n                  补偿单价 = （新补偿单价 - 旧补偿单价）\n                  补偿金额 = （补偿单价 * 数量的绝对值）"))},{default:b((()=>[P(" 确认选择退货流向 ")])),_:1})])),search_operation:b((()=>[g(j,{type:"submit",status:"primary",onClick:t[65]||(t[65]=e=>S(G)("产品和省份的范围与结算报告中的区域-产品关系一致，并且隐含买方类型是医院+药店的筛选条件\n                  已选择的流向数据需要标记一下，变成不可选状态\n                  只展示负数流向"))},{default:b((()=>[P(" 搜索 ")])),_:1}),g(j,{type:"reset"},{default:b((()=>[P("清空")])),_:1})])),_:1},16)])),_:1},8,["modelValue"]),g(E,{modelValue:S(ee).showPlanSelector,"onUpdate:modelValue":t[69]||(t[69]=e=>S(ee).showPlanSelector=e),title:"选择补偿方案",width:"90%","min-width":"600","min-height":"300",resize:"","destroy-on-close":""},{default:b((()=>[g(u,V({ref:"selectPlanGrid"},S(ne)),{toolbar_buttons:b((()=>["2"===S(U)||"3"===S(U)?(y(),v(f,{key:0,placeholder:"选择新/旧补偿方案"},{default:b((()=>[(y(),k(R,null,C([{value:"更新新补偿方案",label:"更新新补偿方案"},{value:"更新旧补偿方案",label:"更新旧补偿方案"}],(e=>g(r,{key:e.value,value:e.value,label:e.label},null,8,["value","label"]))),64))])),_:1})):_("v-if",!0),g(j,{status:"primary",onClick:t[67]||(t[67]=e=>S(G)("更新补偿方案，并自动计算补偿金额"))},{default:b((()=>[P(" 确认选择补偿方案 ")])),_:1})])),search_operation:b((()=>[g(j,{type:"submit",status:"primary",onClick:t[68]||(t[68]=e=>S(G)("根据[产品]+[省份]筛选出最新的十条招标补偿方案，按补偿开始日期倒序排列"))},{default:b((()=>[P(" 搜索 ")])),_:1}),g(j,{type:"reset"},{default:b((()=>[P("清空")])),_:1})])),_:1},16)])),_:1},8,["modelValue"]),g(E,{modelValue:S(ee).showTerminalInventorySelector,"onUpdate:modelValue":t[72]||(t[72]=e=>S(ee).showTerminalInventorySelector=e),title:"添加终端库存",width:"70%","min-width":"600","min-height":"300",resize:"","destroy-on-close":""},{default:b((()=>[g(I,{"title-align":"right","title-width":"100",onSubmit:t[71]||(t[71]=e=>S(ee).showTerminalInventorySelector=!1)},{default:b((()=>[g(o,{title:"库存日期",span:12,"item-render":{}},{default:b((()=>[g(c,{type:"date",transfer:""})])),_:1}),g(o,{title:"产品",span:12,"item-render":{}},{default:b((()=>[g(f,{transfer:"",placeholder:"输入产品编码或名称查询"})])),_:1}),g(o,{title:"省份",span:12,"item-render":{}},{default:b((()=>[g(f,{transfer:""})])),_:1}),g(o,{title:"库存商业",span:12,"item-render":{},"title-prefix":{content:"只能添加非处方药店的零售单店/零售连锁分店，处方药店按照分月处方结构进行筛选"}},{default:b((()=>[g(f,{transfer:"",placeholder:"输入库存商业编码或名称查询"})])),_:1}),g(o,{title:"库存数量",span:12,"item-render":{}},{default:b((()=>[g(c,{type:"number"})])),_:1}),g(o,{title:"库存状态",span:12,"item-render":{}},{default:b((()=>[g(f,{transfer:""})])),_:1}),g(o,{title:"批号",span:12,"item-render":{}},{default:b((()=>[g(c)])),_:1}),g(o,{title:"盘库日期",span:12,"item-render":{}},{default:b((()=>[g(c,{type:"date",transfer:""})])),_:1}),g(o,{title:"降价日期",span:12,"item-render":{}},{default:b((()=>[g(c,{type:"date",transfer:""})])),_:1}),g(o,{align:"center","title-align":"left",span:24},{default:b((()=>[g(j,{type:"submit",status:"primary",onClick:t[70]||(t[70]=e=>S(G)("保存终端库存，根据[库存日期]+[产品编码]+[省份]+[库存商业编码]+[批号]作为唯一条件\n                    系统按照库存日期，产品名称，省份，匹配对应的新旧补偿方案。新补偿方案为方案日期大于库存日期的补偿方案，旧补偿方案为方案日期小于等于库存日期的补偿方案。再取新旧补偿方案对应的补偿单价，补偿金额不需要取绝对值"))},{default:b((()=>[P(" 确认添加 ")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),g(E,{modelValue:S(ee).showApprovalOKSelector,"onUpdate:modelValue":t[74]||(t[74]=e=>S(ee).showApprovalOKSelector=e),title:"标记完成",width:"50%","min-width":"600","min-height":"300",resize:"","destroy-on-close":""},{default:b((()=>[g(I,{"title-align":"right","title-width":"100",onSubmit:t[73]||(t[73]=e=>S(ee).showApprovalOKSelector=!1)},{default:b((()=>[g(o,{span:24,"item-render":{}},{default:b((()=>[W])),_:1}),g(o,{title:"核验结果",span:24,"item-render":{}},{default:b((()=>[g(f,{transfer:"",options:[{value:"标记完成",label:"标记完成"},{value:"清除完成标记",label:"清除完成标记"}]})])),_:1}),g(o,{title:"原因",span:24,"item-render":{}},{default:b((()=>[g(F,{"model-value":""})])),_:1}),g(o,{align:"center","title-align":"left",span:24},{default:b((()=>[g(j,{type:"submit",status:"primary"},{default:b((()=>[P("确认")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),g(E,{modelValue:S(ee).showApprovalDataSelector,"onUpdate:modelValue":t[76]||(t[76]=e=>S(ee).showApprovalDataSelector=e),title:"数据核验",width:"50%","min-width":"600","min-height":"300",resize:"","destroy-on-close":""},{default:b((()=>[g(I,{"title-align":"right","title-width":"100",onSubmit:t[75]||(t[75]=e=>S(ee).showApprovalDataSelector=!1)},{default:b((()=>[g(o,{span:24,"item-render":{}},{default:b((()=>[X])),_:1}),g(o,{title:"核验结果",span:24,"item-render":{}},{default:b((()=>[g(f,{transfer:"",options:[{value:"流向核验通过",label:"流向核验通过"},{value:"流向核验拒绝",label:"流向核验拒绝"}]})])),_:1}),g(o,{title:"原因",span:24,"item-render":{}},{default:b((()=>[g(F,{"model-value":""})])),_:1}),g(o,{align:"center","title-align":"left",span:24},{default:b((()=>[g(j,{type:"submit",status:"primary"},{default:b((()=>[P("确认")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),g(E,{modelValue:S(ee).showApprovalInvoiceSelector,"onUpdate:modelValue":t[78]||(t[78]=e=>S(ee).showApprovalInvoiceSelector=e),title:"发票核验",width:"50%","min-width":"600","min-height":"300",resize:"","destroy-on-close":""},{default:b((()=>[g(I,{"title-align":"right","title-width":"100",onSubmit:t[77]||(t[77]=e=>S(ee).showApprovalInvoiceSelector=!1)},{default:b((()=>[g(o,{span:24,"item-render":{}},{default:b((()=>[L])),_:1}),g(o,{title:"核验结果",span:24,"item-render":{}},{default:b((()=>[g(f,{transfer:"",options:[{value:"发票核验通过",label:"发票核验通过"},{value:"发票核验拒绝",label:"发票核验拒绝"}]})])),_:1}),g(o,{title:"原因",span:24,"item-render":{}},{default:b((()=>[g(F,{"model-value":""})])),_:1}),g(o,{align:"center","title-align":"left",span:24},{default:b((()=>[g(j,{type:"submit",status:"primary"},{default:b((()=>[P("确认")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),g(E,{modelValue:S(ee).showInvoiceSelector,"onUpdate:modelValue":t[79]||(t[79]=e=>S(ee).showInvoiceSelector=e),title:"发票信息",width:"90%","min-width":"600","min-height":"300",resize:"","destroy-on-close":""},{default:b((()=>[g(I,{"title-align":"right","title-width":"100"},{default:b((()=>[g(o,{span:24},{default:b((()=>[g(H,{"enable-insert":S(i)||S(a),"enable-remove":S(i)||S(a),"show-province":""},null,8,["enable-insert","enable-remove"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),g(E,{modelValue:S(ee).showFinanceSelector,"onUpdate:modelValue":t[80]||(t[80]=e=>S(ee).showFinanceSelector=e),title:"财务审核凭证",width:"90%","min-width":"600","min-height":"300",resize:"","destroy-on-close":""},{default:b((()=>[g(I,{"title-align":"right","title-width":"100"},{default:b((()=>[g(o,{span:24},{default:b((()=>[g(H,{"enable-insert":S(d),"enable-remove":S(d)},null,8,["enable-insert","enable-remove"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),g(E,{modelValue:S(ee).showAppealSelector,"onUpdate:modelValue":t[83]||(t[83]=e=>S(ee).showAppealSelector=e),title:"申诉原因填写",width:"50%","min-width":"600","min-height":"300",resize:"","destroy-on-close":""},{default:b((()=>[g(I,{"title-align":"right","title-width":"100",onSubmit:t[82]||(t[82]=e=>S(ee).showAppealSelector=!1)},{default:b((()=>[g(o,{title:"申诉原因",span:24,"item-render":{}},{default:b((()=>[g(F,{"model-value":""})])),_:1}),g(o,{align:"center","title-align":"left",span:24},{default:b((()=>[g(j,{type:"submit",status:"primary",onClick:t[81]||(t[81]=e=>S(G)("确认后，系统将申诉原因保存，并把数据提交。"))},{default:b((()=>[P(" 确认申诉 ")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}}}),[["__file","C:/Users/ThinkPad/source/Bonbonniere/bonbon-vue/src/views/c-payment/BidPriceReduceCalculate.vue"]]);export{Y as default};
