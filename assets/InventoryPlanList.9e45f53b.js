var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r;import{d as i,r as s,aQ as p,az as c,bj as d,aV as m,aW as f,aS as u,a as y,ay as h,bk as b,bJ as v,cf as g,a_ as w,a$ as C}from"./index.44eff430.js";import{g as k,a as _}from"./vxeTableHelper.6baae079.js";import{g as j}from"./c-plan-inventory.service.aeccc628.js";import{g as x,s as O,i as P,a as R}from"./temporary-data.4dfd9cc4.js";import{r as $}from"./routerHelper.692f5c09.js";import{_ as S}from"./Grid.691fb1da.js";import"./index.85de6dcb.js";import{C as I}from"./Card.3ece05fb.js";import"./Col.a5355e16.js";const V=b("div",{style:{color:"lightgrey"}},"仅数据团队可以创建库存补偿方案",-1),L=b("br",null,null,-1),T=C(i({__name:"InventoryPlanList",setup(e){const i=s(),C=p(),T=c((q=((e,t)=>{for(var a in t||(t={}))o.call(t,a)&&l(e,a,t[a]);if(r)for(var a of r(t))n.call(t,a)&&l(e,a,t[a]);return e})({},k("InventoryPlanList",j)),z={formConfig:{items:[{itemRender:{name:"$input",props:{placeholder:"补偿方案名称"}}},{itemRender:{name:"$select",options:x.filter((e=>0===e.parentId&&"全国"!==e.name)).map((e=>({value:e.id,label:e.name}))),props:{placeholder:"省份"}}},{itemRender:{name:"$select",options:O.map((e=>({value:e.code,label:e.name}))),props:{filterable:!0,multiple:!0,placeholder:"产品编码或名称"}}},{folding:!0,itemRender:{name:"$select",options:P,props:{placeholder:"方案类型"}}},{folding:!0,itemRender:{name:"$input",props:{type:"date",placeholder:"降价日期从"}}},{folding:!0,itemRender:{name:"$input",props:{type:"date",placeholder:"降价日期到"}}},{folding:!0,itemRender:{name:"$input",props:{type:"date",placeholder:"审批完成日期从"}}},{folding:!0,itemRender:{name:"$input",props:{type:"date",placeholder:"审批完成日期到"}}},{folding:!0,itemRender:{name:"$select",options:R,props:{placeholder:"审批状态"}}},{collapseNode:!0,itemRender:{},slots:{default:"search_operation"}}]},columns:[{field:"checkbox",type:"checkbox",width:50,align:"center",fixed:"left"},{field:"#",type:"seq",width:60},{field:"name",title:"补偿方案名称",width:300,slots:{default:"name_link"}},{field:"subType",title:"降价类型",width:220},{field:"estimateAmount",title:"预估总金额",width:150,titlePrefix:{content:"如果是商务经理或者区域商务总监来查看，需要根据其可查看数据的权限，重新汇总计算",icon:"vxe-icon-question-circle-fill"}},{field:"createdOn",title:"提交日期",width:150},{field:"approvedOn",title:"审批完成日期",width:150},{field:"status",title:"审批状态",width:180,fixed:"right"}]},t(q,a(z))));var q,z;const E=c({showCreateSelector:!1}),G=e=>{e||(E.showCreateSelector=!0),"单出厂价下调"===e&&$(C,"c-plan-inventory-create"),"中标价&出厂价同时下调"===e&&$(C,"c-plan-inventory-create",{type:"pair"})};return(e,t)=>{const a=d("vxe-button"),r=d("vxe-grid"),o=S,n=I,l=d("vxe-modal"),s=d("page-container");return m(),f(s,null,{default:u((()=>[y(r,g({ref_key:"xGrid",ref:i},h(T)),{search_operation:u((()=>[y(a,{status:"primary",content:"搜索",onClick:t[0]||(t[0]=e=>h(_)("数据团队和审批流中人员可见。\n              商务经理和进口商务经理是否也可以查看（哪些状态的数据）？"))}),y(a,{type:"download",status:"primary",content:"下载",onClick:t[1]||(t[1]=e=>h(_)("批量下载，包括补偿明细，关联方案名称和审批状态等，保存在单个Excel的单个sheet中"))})])),toolbar_buttons:u((()=>[y(a,{onClick:t[2]||(t[2]=e=>G()),type:"create",status:"primary",content:"创建方案"}),y(a,{onClick:t[3]||(t[3]=e=>h(_)("仅数据团队可用。至少勾选一条数据；只有草稿状态的方案才允许取消")),type:"cancel",status:"primary",content:"取消方案"}),y(a,{onClick:t[4]||(t[4]=e=>h(_)("仅数据团队可用。至少勾选一条数据；只有审批通过的方案才允许停用")),type:"stop",status:"primary",content:"停用方案"}),y(a,{onClick:t[5]||(t[5]=e=>h(_)("仅数据团队可用。至少勾选一条数据；只有状态为“草稿”的方案允许提交审批")),type:"approval",status:"primary",content:"提交审批"}),y(a,{onClick:t[6]||(t[6]=e=>h(_)("仅审批流中角色可用。至少勾选一条数据；只有状态为“待XX审批”的方案允许审批")),type:"approval",status:"primary",content:"审批"})])),name_link:u((({row:e})=>[b("span",{class:"name-link",onClick:t[7]||(t[7]=e=>h(_)("进入表单，根据角色和状态控制显示的内容和按钮"))},v(e.name),1)])),_:1},16),y(l,{modelValue:h(E).showCreateSelector,"onUpdate:modelValue":t[10]||(t[10]=e=>h(E).showCreateSelector=e),title:"请选择要创建的降价类型","min-width":"600","min-height":"300",resize:"","destroy-on-close":""},{default:u((()=>[V,L,y(n,null,{default:u((()=>[y(o,{class:"card-grid",onClick:t[8]||(t[8]=e=>G("单出厂价下调"))},{default:u((()=>[w(" 单出厂价下调 ")])),_:1}),y(o,{class:"card-grid",onClick:t[9]||(t[9]=e=>G("中标价&出厂价同时下调"))},{default:u((()=>[w(" 中标价&出厂价同时下调 ")])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}}}),[["__file","C:/Users/ThinkPad/source/Bonbonniere/bonbon-vue/src/views/c-plan/InventoryPlanList.vue"]]);export{T as default};
