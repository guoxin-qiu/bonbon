var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,r=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,o=(e,t)=>{for(var a in t||(t={}))i.call(t,a)&&r(e,a,t[a]);if(l)for(var a of l(t))d.call(t,a)&&r(e,a,t[a]);return e},n=(e,l)=>t(e,a(l));import{_ as s}from"./index.62bfc2e0.js";import{_ as u}from"./index.a8d86bf2.js";import{d as m,aQ as f,r as c,az as p,bj as h,aV as b,aW as w,aS as v,a as _,ay as y,cf as V,a_ as g,bR as k,aX as C,cl as D,bK as P,a$ as x}from"./index.44eff430.js";import{g as U,a as j}from"./vxeTableHelper.6baae079.js";import{c as O}from"./c-plan-inventory.service.aeccc628.js";import{r as E}from"./routerHelper.692f5c09.js";import{Q as S}from"./vue-quill.snow.40f2bfe1.js";import"./master-data.service.95993c0c.js";const T=x(m({__name:"BenefitReclaimPlanCreator",setup(e){const t=f(),a=c(),l=c(),i=c("1"),d=p({formData:{chineseName:"利润回收方案"},formRules:{chineseName:[{required:!0}]},isEditing:!1,showPlanCreator:!1,showStockDateSelector:!1}),r=p({formData:{reclaimType:"出货量"},formRules:{reclaimObject:[{required:!0}],reclaimScope:[{required:!0}],reclaimType:[{required:!0}],province:[{required:!0}],sku:[{required:!0}],startDate:[{required:!0}],unitPrice:[{required:!0}]}}),m=p(n(o({},U("dealerDetailGrid",(()=>O(2,"经销商")))),{columns:[{field:"reclaimObject",title:"回收对象",width:100},{field:"skuCode",title:"产品编码",width:100},{field:"skuName",title:"产品名称",width:200},{field:"province",title:"省份",width:100},{field:"reclaimType",title:"回收类型",width:140},{field:"reclaimScope",title:"回收范围",width:140},{field:"startDate",title:"回收开始日期",width:140},{field:"endDate",title:"回收结束日期",width:140},{field:"unitPrice",title:"回收单价",width:100},{field:"remark",title:"备注",width:100},{title:"操作",align:"center",fixed:"right",width:200,slots:{default:"operations"}}]})),x=p(n(o({},U("importerDetailGrid",(()=>O(2,"进口商")))),{columns:[{field:"reclaimObject",title:"回收对象",width:100},{field:"skuCode",title:"产品编码",width:100},{field:"skuName",title:"产品名称",width:200},{field:"province",title:"省份",width:100},{field:"reclaimType",title:"回收类型",width:140},{field:"reclaimScope",title:"回收范围",width:140},{field:"startDate",title:"回收开始日期",width:140},{field:"endDate",title:"回收结束日期",width:140},{field:"unitPrice",title:"回收单价",width:100},{field:"remark",title:"备注",width:100},{title:"操作",align:"center",fixed:"right",width:200,slots:{default:"operations"}}]}));function T(){var e;null==(e=l.value)||e.validate((e=>{void 0===e&&j("系统校验必填项，提交成功后，进入审批流程。")}))}return(e,o)=>{const n=h("vxe-input"),f=h("vxe-form-item"),c=h("vxe-form"),p=h("vxe-button"),U=h("vxe-grid"),O=D,q=P,R=h("vxe-select"),N=u,G=s,K=h("vxe-textarea"),B=h("vxe-modal"),z=h("page-container");return b(),w(z,null,{default:v((()=>[_(c,{"title-align":"right","title-width":"100",data:y(d).formData,rules:y(d).formRules,ref_key:"xForm",ref:l},{default:v((()=>[_(f,{"title-width":"180",field:"chineseName",title:"方案名称",span:24,"item-render":{}},{default:v((({data:e})=>[_(n,{modelValue:e.chineseName,"onUpdate:modelValue":t=>e.chineseName=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),_(f,{"title-width":"180",field:"remark",title:"方案概要",span:24,"item-render":{}},{default:v((({data:e})=>[_(y(S),{content:e.remark},null,8,["content"])])),_:1})])),_:1},8,["data","rules"]),_(q,{activeKey:y(i),"onUpdate:activeKey":o[6]||(o[6]=e=>k(i)?i.value=e:null),type:"card"},{default:v((()=>[_(O,{key:"2",tab:"进口商"},{default:v((()=>[_(U,V({ref_key:"xGrid",ref:a},y(x)),{toolbar_buttons:v((()=>[_(p,{status:"primary",onClick:o[0]||(o[0]=e=>y(d).showPlanCreator=!0)},{default:v((()=>[g("添加")])),_:1})])),operations:v((()=>[_(p,{status:"primary",onClick:o[1]||(o[1]=()=>{y(d).isEditing=!0,y(d).showPlanCreator=!0})},{default:v((()=>[g(" 编辑 ")])),_:1}),_(p,{status:"danger",onClick:o[2]||(o[2]=e=>y(j)("直接删除"))},{default:v((()=>[g("删除")])),_:1})])),_:1},16)])),_:1}),_(O,{key:"1",tab:"经销商"},{default:v((()=>[_(U,V({ref_key:"xGrid",ref:a},y(m)),{toolbar_buttons:v((()=>[_(p,{status:"primary",onClick:o[3]||(o[3]=()=>{y(d).isEditing=!1,y(d).showPlanCreator=!0})},{default:v((()=>[g(" 添加 ")])),_:1})])),operations:v((()=>[_(p,{status:"primary",onClick:o[4]||(o[4]=()=>{y(d).isEditing=!0,y(d).showPlanCreator=!0})},{default:v((()=>[g(" 编辑 ")])),_:1}),_(p,{status:"danger",onClick:o[5]||(o[5]=e=>y(j)("直接删除"))},{default:v((()=>[g("删除")])),_:1})])),_:1},16)])),_:1})])),_:1},8,["activeKey"]),_(c,{"title-align":"right","title-width":"100",data:y(d).formData,rules:y(d).formRules},{default:v((()=>[_(f,{align:"center","title-align":"left",span:24},{default:v((()=>[_(p,{type:"submit",status:"primary",onClick:T},{default:v((()=>[g("提交审批")])),_:1}),_(p,{type:"submit",status:"primary",onClick:o[7]||(o[7]=e=>y(j)("保存草稿数据，校验必填项"))},{default:v((()=>[g(" 保存草稿 ")])),_:1}),_(p,{onClick:o[8]||(o[8]=e=>y(E)(y(t),"plan-benefit-reclaim"))},{default:v((()=>[g("回到列表")])),_:1})])),_:1})])),_:1},8,["data","rules"]),_(B,{modelValue:y(d).showPlanCreator,"onUpdate:modelValue":o[11]||(o[11]=e=>y(d).showPlanCreator=e),title:y(d).isEditing?"编辑利润回收方案":"添加利润回收方案",width:"80%","min-width":"600","min-height":"300",resize:"","destroy-on-close":""},{default:v((()=>[_(c,{"title-align":"right","title-width":"100",data:y(r).formData,rules:y(r).formRules,onSubmit:o[10]||(o[10]=()=>{y(d).isEditing=!1,y(d).showPlanCreator=!1})},{default:v((()=>[_(f,{field:"reclaimObject",title:"回收对象","title-width":"150",span:12,"item-render":{}},{default:v((()=>[_(R,{transfer:"",disabled:"","model-value":"1"===y(i)?"经销商":"进口商",options:[{value:"进口商",label:"进口商"},{value:"经销商",label:"经销商"}]},null,8,["model-value"])])),_:1}),_(f,{field:"sku",title:"产品","title-width":"150",span:12,"item-render":{}},{default:v((({data:e})=>[_(N,{modelValue:e.sku,"onUpdate:modelValue":t=>e.sku=t,disabled:y(d).isEditing},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:1}),_(f,{field:"reclaimType",title:"回收类型","title-width":"150",span:12,"item-render":{},"title-prefix":{content:"页面联动。在结算中，出货量匹配流向，会用到回收范围，进货量则忽略回收范围。"}},{default:v((({data:e})=>[_(R,{disabled:y(d).isEditing,transfer:"",modelValue:e.reclaimType,"onUpdate:modelValue":t=>e.reclaimType=t,options:[{value:"进货量",label:"进货量"},{value:"出货量",label:"出货量"}]},null,8,["disabled","modelValue","onUpdate:modelValue"])])),_:1}),"出货量"===y(r).formData.reclaimType?(b(),w(f,{key:0,field:"reclaimScope",title:"回收范围",disabled:y(d).isEditing,"title-width":"150",span:12,"item-render":{},"title-prefix":{content:"在结算中，匹配的是流向中的买方"}},{default:v((({data:e})=>[_(R,{transfer:"",disabled:y(d).isEditing,modelValue:e.reclaimScope,"onUpdate:modelValue":t=>e.reclaimScope=t,multiple:"",options:[{value:"经销商",label:"经销商"},{value:"医院",label:"医院"},{value:"药店",label:"药店"},{value:"关联药店",label:"关联药店"}]},null,8,["disabled","modelValue","onUpdate:modelValue"])])),_:1},8,["disabled"])):C("v-if",!0),"出货量"===y(r).formData.reclaimType?(b(),w(f,{key:1,field:"province",title:"省份","title-width":"150",span:12,"item-render":{}},{default:v((({data:e})=>[_(G,{type:"province",modelValue:e.province,"onUpdate:modelValue":t=>e.province=t,nationwide:"",multiple:"",disabled:y(d).isEditing},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:1})):C("v-if",!0),_(f,{field:"startDate",title:"回收开始日期","title-width":"150",span:12,"item-render":{}},{default:v((({data:e})=>[_(n,{type:"date",modelValue:e.startDate,"onUpdate:modelValue":t=>e.startDate=t,transfer:"",clearable:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),_(f,{field:"endDate",title:"回收结束日期","title-width":"150",span:12,"item-render":{}},{default:v((({data:e})=>[_(n,{type:"date",modelValue:e.endDate,"onUpdate:modelValue":t=>e.endDate=t,transfer:"",clearable:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),_(f,{field:"unitPrice",title:"回收单价","title-width":"150",span:12,"item-render":{}},{default:v((({data:e})=>[_(n,{type:"number",modelValue:e.unitPrice,"onUpdate:modelValue":t=>e.unitPrice=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),_(f,{field:"remark",title:"备注","title-width":"150",span:24,"item-render":{}},{default:v((({data:e})=>[_(K,{modelValue:e.remark,"onUpdate:modelValue":t=>e.remark=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),_(f,{align:"center","title-align":"left",span:24},{default:v((()=>[_(p,{status:"primary",onClick:o[9]||(o[9]=e=>y(j)("校验必填项，回收对象+产品+回收类型+回收范围+回收开始结束日期，是否重复或日期交叉。若有给出提示失败的信息。\n                    如果多选省份，则拆分后保存。\n                    如果省份是全国，则不需要拆分。"))},{default:v((()=>[g(" 确认 ")])),_:1})])),_:1})])),_:1},8,["data","rules"])])),_:1},8,["modelValue","title"])])),_:1})}}}),[["__file","C:/Users/ThinkPad/source/Bonbonniere/bonbon-vue/src/views/c-plan/BenefitReclaimPlanCreator.vue"]]);export{T as default};
