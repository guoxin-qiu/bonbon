var e=Object.defineProperty,t=Object.defineProperties,l=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,r=(t,l,i)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[l]=i,o=(e,t)=>{for(var l in t||(t={}))a.call(t,l)&&r(e,l,t[l]);if(i)for(var l of i(t))d.call(t,l)&&r(e,l,t[l]);return e},n=(e,i)=>t(e,l(i));import{_ as s}from"./index.9b869bd5.js";import{d as f,bn as u,aQ as c,r as m,az as p,bj as h,aV as w,aW as y,aS as k,a as _,ay as b,a_ as v,aR as g,ca as C,ac as x,aX as S,bR as P,cf as V,cj as D,ck as R,bk as T,bJ as O,cl as U,bK as j,a$ as A}from"./index.44eff430.js";import{g as N,a as K,b as $}from"./vxeTableHelper.6baae079.js";import{n as q,s as E,q as G}from"./temporary-data.4dfd9cc4.js";import{d as Y}from"./dayjs.min.7438ea6f.js";import{c as z,r as F}from"./routerHelper.692f5c09.js";import{c as B,b as M}from"./c-plan-inventory.service.aeccc628.js";import{_ as I,C as H}from"./CollapsePanel.5cf4e0c3.js";const Q=T("div",null,O("标记完成：针对流向核验通过、流向核验拒绝、发票核验通过、发票核验拒绝的数据\n                清除完成标记：将完成标记置为空即可\n                标记完成状态下的数据，商务不可修改"),-1),J=A(f({__name:"BenefitReclaimPaymentCreator",setup(e){const t=u(),l=c(),i=z(t,"payment-benefit-reclaim-create")||z(t,"payment-benefit-reclaim-edit"),a=z(t,"payment-benefit-reclaim-calculate"),d=z(t,"payment-benefit-reclaim-check-calculate"),r=z(t,"payment-benefit-reclaim-ready-for-finance"),f=z(t,"payment-benefit-reclaim-confirm-calculate"),T=z(t,"payment-benefit-reclaim-confirmed"),O=m("1"),A=m([]),J=m(),W=m("1"),X=Y().format("YYYY-MM-DD"),L=Y().add(13,"day").format("YYYY-MM-DD"),Z=p({formData:{chineseName:"利润回收结算报告",englishName:"Benefit reclaim payment settlement report",periodStart:"2023-01-01",periodEnd:"2023-03-31",dataScope:"1",t1t2Ref:"2023Q1",windowPhaseStartDate:X,windowPhaseEndDate:L},formRules:{chineseName:[{required:!0}],englishName:[{required:!0}],period:[{required:!0}],dataScope:[{required:!0}],t1t2Ref:[{required:!0}]},showPlanSelector:!1,showT1Selector:!1,showApprovalSelector:!1,showFinanceSelector:!1,showAppealSelector:!1,showApprovalOKSelector:!1}),ee=p(n(o({},N("dealerPlanGrid",(()=>B(2,"进口商")))),{columns:[{field:"reclaimObject",title:"回收对象",width:100},{field:"skuCode",title:"产品编码",width:100},{field:"skuName",title:"产品名称",width:200},{field:"reclaimType",title:"回收类型",width:140},{field:"province",title:"省份",width:100},{field:"reclaimScope",title:"回收范围",width:140},{field:"startDate",title:"回收开始日期",width:140},{field:"endDate",title:"回收结束日期",width:140},{field:"unitPrice",title:"回收单价",width:100}]})),te=p(n(o({},N("dealerPlanGrid",(()=>B(2,"经销商")))),{columns:[{field:"reclaimObject",title:"回收对象",width:100},{field:"skuCode",title:"产品编码",width:100},{field:"skuName",title:"产品名称",width:200},{field:"reclaimType",title:"回收类型",width:140},{field:"province",title:"省份",width:100},{field:"reclaimScope",title:"回收范围",width:140},{field:"startDate",title:"回收开始日期",width:140},{field:"endDate",title:"回收结束日期",width:140},{field:"unitPrice",title:"回收单价",width:100}]})),le=p(n(o({},N("dealerInGrid")),{data:q.filter((e=>"经销商"===e.reclaimObject)),formConfig:{items:[{slots:{default:"search_geo"}},{itemRender:{name:"$select",options:E.map((e=>({value:e.code,label:e.name}))),props:{filterable:!0,placeholder:"产品编码或名称"}}},{itemRender:{},slots:{default:"search_operation"}}]},columns:[{field:"checkbox",type:"checkbox",width:50,align:"center",fixed:"left"},{field:"salesDate",title:"销售日期",width:100},{field:"sellerProvince",title:"省份",width:100},{field:"buyerCode",title:"商业编码",width:100},{field:"buyerName",title:"商业名称",width:200},{field:"skuCode",title:"产品编码",width:100},{field:"skuName",title:"产品名称",width:200},{field:"unitPrice",title:"回收单价",width:100,titlePrefix:{content:"匹配方案中的单价"}},{field:"quantity",title:"回收数量",width:100,titlePrefix:{content:"流向中的数量"}},{field:"amount",title:"回收金额",width:100,titlePrefix:{content:"回收单价*回收数量"}},{field:"startDate",title:"回收开始日期",width:150,titlePrefix:{content:"max(匹配的方案中的开始日期，结算报告的开始日期)"}},{field:"endDate",title:"回收结束日期",width:150,titlePrefix:{content:"min(匹配的方案中的结束日期，结算报告的结束日期)"}},{field:"t1",title:"一级商业",width:120,titlePrefix:{content:"TTD中的商业名称"}},{field:"pfObject",title:"支付对象",width:120,titlePrefix:{content:"一级商业"}},{field:"remark",title:"商务备注",width:200},{field:"approvalStatus",title:"核验状态",width:100},{field:"approvalRemark",title:"核验意见",width:200},{field:"appealRemark",title:"申诉原因",width:200},{title:"操作",align:"left",width:100,fixed:d||a?"right":void 0,slots:{default:"operations"}}]})),ie=p(n(o({},N("dealerOutGrid")),{data:q.filter((e=>"经销商"===e.reclaimObject)),formConfig:{items:[{slots:{default:"search_geo"}},{itemRender:{name:"$select",options:E.map((e=>({value:e.code,label:e.name}))),props:{filterable:!0,placeholder:"产品编码或名称"}}},{itemRender:{name:"$select",options:[],props:{filterable:!0,placeholder:"买方编码或名称"}}},{itemRender:{name:"$select",options:[],props:{filterable:!0,placeholder:"卖方编码或名称"}}},{itemRender:{},slots:{default:"search_operation"}}]},columns:[{field:"checkbox",type:"checkbox",width:50,align:"center",fixed:"left"},{field:"salesDate",title:"销售日期",width:100},{field:"skuCode",title:"产品编码",width:100},{field:"skuName",title:"产品名称",width:200},{field:"sellerCode",title:"卖方编码",width:100},{field:"sellerName",title:"卖方名称",width:200},{field:"sellerType",title:"卖方类型",width:200},{field:"sellerProvince",title:"卖方省份",width:200},{field:"buyerCode",title:"买方编码",width:100},{field:"buyerName",title:"买方名称",width:200},{field:"buyerType",title:"买方类型",width:200},{field:"buyerProvince",title:"买方省份",width:200},{field:"buyerCity",title:"买方城市",width:200},{field:"unitPrice",title:"回收单价",width:100,titlePrefix:{content:"匹配方案中的单价"}},{field:"quantity",title:"回收数量",width:100,titlePrefix:{content:"流向中的数量"}},{field:"amount",title:"回收金额",width:100,titlePrefix:{content:"回收单价*回收数量"}},{field:"startDate",title:"回收开始日期",width:150,titlePrefix:{content:"max(匹配的方案中的开始日期，结算报告的开始日期)"}},{field:"endDate",title:"回收结束日期",width:150,titlePrefix:{content:"min(匹配的方案中的结束日期，结算报告的结束日期)"}},{field:"t1",title:"一级商业",width:120,titlePrefix:{content:"根据卖方从T1-T2关系匹配出T1"}},{field:"pfObject",title:"支付对象",width:120,titlePrefix:{content:"能匹配到进口商-产品关系就拿进口商，否则就是一级商，都没有就是空"}},{field:"remark",title:"商务备注",width:200},{field:"approvalStatus",title:"核验状态",width:100},{field:"approvalRemark",title:"核验意见",width:200},{field:"appealRemark",title:"申诉原因",width:200},{title:"操作",align:"left",width:100,fixed:d||a?"right":void 0,slots:{default:"operations"}}]})),ae=p(n(o({},N("importerInGrid")),{data:q.filter((e=>"进口商"===e.reclaimObject)),formConfig:{items:[{itemRender:{name:"$select",options:E.map((e=>({value:e.code,label:e.name}))),props:{filterable:!0,placeholder:"产品编码或名称"}}},{itemRender:{},slots:{default:"search_operation"}}]},columns:[{field:"checkbox",type:"checkbox",width:50,align:"center",fixed:"left"},{field:"salesDate",title:"销售日期",width:100},{field:"skuCode",title:"产品编码",width:100},{field:"skuName",title:"产品名称",width:200},{field:"buyerCode",title:"商业编码",width:100},{field:"buyerName",title:"商业名称",width:200},{field:"unitPrice",title:"回收单价",width:100,titlePrefix:{content:"匹配方案中的单价"}},{field:"quantity",title:"回收数量",width:100,titlePrefix:{content:"流向中的数量"}},{field:"amount",title:"回收金额",width:100,titlePrefix:{content:"回收单价*回收数量"}},{field:"startDate",title:"回收开始日期",width:150,titlePrefix:{content:"max(匹配的方案中的开始日期，结算报告的开始日期)"}},{field:"endDate",title:"回收结束日期",width:150,titlePrefix:{content:"min(匹配的方案中的结束日期，结算报告的结束日期)"}},{field:"pfObject",title:"支付对象",width:120,titlePrefix:{content:"TTD中的商业名称，可修改"}},{field:"remark",title:"商务备注",width:200},{field:"approvalStatus",title:"核验状态",width:100},{field:"approvalRemark",title:"核验意见",width:200},{field:"appealRemark",title:"申诉原因",width:200},{title:"操作",align:"left",width:100,fixed:d||a?"right":void 0,slots:{default:"operations"}}]})),de=p(n(o({},N("importerOutGrid")),{data:q.filter((e=>"进口商"===e.reclaimObject)),formConfig:{items:[{slots:{default:"search_geo"}},{itemRender:{name:"$select",options:E.map((e=>({value:e.code,label:e.name}))),props:{filterable:!0,placeholder:"产品编码或名称"}}},{itemRender:{name:"$select",options:[],props:{filterable:!0,placeholder:"买方编码或名称"}}},{itemRender:{name:"$select",options:[],props:{filterable:!0,placeholder:"卖方编码或名称"}}},{itemRender:{},slots:{default:"search_operation"}}]},columns:[{field:"checkbox",type:"checkbox",width:50,align:"center",fixed:"left"},{field:"salesDate",title:"销售日期",width:100},{field:"skuCode",title:"产品编码",width:100},{field:"skuName",title:"产品名称",width:200},{field:"sellerCode",title:"卖方编码",width:100},{field:"sellerName",title:"卖方名称",width:200},{field:"sellerType",title:"卖方类型",width:200},{field:"sellerProvince",title:"卖方省份",width:200},{field:"buyerCode",title:"买方编码",width:100},{field:"buyerName",title:"买方名称",width:200},{field:"buyerType",title:"买方类型",width:200},{field:"buyerProvince",title:"买方省份",width:200},{field:"buyerCity",title:"买方城市",width:200},{field:"unitPrice",title:"回收单价",width:100,titlePrefix:{content:"匹配方案中的单价"}},{field:"quantity",title:"回收数量",width:100,titlePrefix:{content:"流向中的数量"}},{field:"amount",title:"回收金额",width:100,titlePrefix:{content:"回收单价*回收数量"}},{field:"startDate",title:"回收开始日期",width:150,titlePrefix:{content:"max(匹配的方案中的开始日期，结算报告的开始日期)"}},{field:"endDate",title:"回收结束日期",width:150,titlePrefix:{content:"min(匹配的方案中的结束日期，结算报告的结束日期)"}},{field:"pfObject",title:"支付对象",width:120,titlePrefix:{content:"就是卖方"}},{field:"remark",title:"商务备注",width:200},{field:"approvalStatus",title:"核验状态",width:100},{field:"approvalRemark",title:"核验意见",width:200},{field:"appealRemark",title:"申诉原因",width:200},{title:"操作",align:"left",width:100,fixed:d||a?"right":void 0,slots:{default:"operations"}}]})),re=p(n(o({},N("planSelectorGrid",M)),{formConfig:{items:[{itemRender:{name:"$select",options:E.map((e=>({value:e.code,label:e.name}))),props:{filterable:!0,multiple:!0,placeholder:"产品编码或名称"}}},{itemRender:{},slots:{default:"search_operation"}}]},columns:[{field:"radio",type:"radio",width:50,align:"center",fixed:"left"},{field:"name",title:"补偿方案名称"}]}));function oe(){var e;null==(e=J.value)||e.validate((e=>{if(void 0===e){if(!Z.formData.windowPhaseStartDate||!Z.formData.windowPhaseEndDate)return void K("请先设置窗口期");K(`提交成功！\n          本次结算的窗口期为${Z.formData.windowPhaseStartDate}~${Z.formData.windowPhaseEndDate}。\n          已发送提醒邮件给相关的商务经理。`).then((()=>{F(l,"payment-benefit-reclaim-calculate")}))}}))}return(e,t)=>{const o=h("vxe-input"),n=h("vxe-form-item"),u=h("vxe-radio"),c=h("vxe-radio-group"),m=h("vxe-button"),p=h("vxe-option"),N=h("vxe-select"),q=h("vxe-textarea"),E=h("vxe-form"),Y=h("vxe-grid"),z=U,B=j,M=I,X=H,L=h("vxe-checkbox"),ne=h("vxe-modal"),se=s,fe=h("page-container");return w(),y(fe,null,{default:k((()=>[_(E,{"title-align":"right","title-width":"100",data:b(Z).formData,rules:b(Z).formRules,ref_key:"xForm",ref:J},{default:k((()=>[_(n,{"title-width":"180",field:"chineseName",title:"报告名称（中文）",span:24,"item-render":{}},{default:k((({data:e})=>[_(o,{modelValue:e.chineseName,"onUpdate:modelValue":t=>e.chineseName=t,disabled:!b(i)},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:1}),_(n,{"title-width":"180",field:"englishName",title:"报告名称（英文）",span:24,"item-render":{}},{default:k((({data:e})=>[_(o,{modelValue:e.englishName,"onUpdate:modelValue":t=>e.englishName=t,disabled:!b(i)},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:1}),_(n,{field:"dataScope",title:"数据范围","title-width":"150",span:12,"item-render":{}},{default:k((({data:e})=>[_(c,{modelValue:e.dataScope,"onUpdate:modelValue":t=>e.dataScope=t},{default:k((()=>[_(u,{label:"1"},{default:k((()=>[v("买方省")])),_:1}),_(u,{label:"2"},{default:k((()=>[v("卖方省")])),_:1}),_(u,{label:"3"},{default:k((()=>[v("买方省=卖方省")])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),_(n,{"title-width":"180",field:"period",title:"结算周期",span:16,"item-render":{}},{default:k((({data:e})=>[_(o,{modelValue:e.periodStart,"onUpdate:modelValue":t=>e.periodStart=t,type:"date",style:{width:"150px"}},null,8,["modelValue","onUpdate:modelValue"]),v(" 至 "),_(o,{modelValue:e.periodEnd,"onUpdate:modelValue":t=>e.periodEnd=t,type:"date",style:{width:"150px"}},null,8,["modelValue","onUpdate:modelValue"]),_(m,{type:"text",status:"primary",content:"按财季选择",style:{"margin-left":"20px","text-decoration":"underline"}})])),_:1}),_(n,{"title-width":"180",field:"t1t2Ref",title:"T1&T2关系",span:12,"item-render":{}},{default:k((({data:e})=>[_(N,{modelValue:e.t1t2Ref,"onUpdate:modelValue":t=>e.t1t2Ref=t,transfer:"",clearable:"",placeholder:""},{default:k((()=>[(w(!0),g(x,null,C(b(G),(e=>(w(),y(p,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),_(n,{"title-width":"180",field:"windowPhase",title:"窗口期",span:16,"item-render":{}},{default:k((({data:e})=>[_(o,{modelValue:e.windowPhaseStartDate,"onUpdate:modelValue":t=>e.windowPhaseStartDate=t,type:"datetime",disabled:!b(i),style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue","disabled"]),v(" 至 "),_(o,{modelValue:e.windowPhaseEndDate,"onUpdate:modelValue":t=>e.windowPhaseEndDate=t,disabled:!b(i),type:"datetime",style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:1}),_(n,{"title-width":"180",field:"comments",title:"备注",span:24,"item-render":{}},{default:k((({data:e})=>[_(q,{modelValue:e.comments,"onUpdate:modelValue":t=>e.comments=t,disabled:!b(i)},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:1})])),_:1},8,["data","rules"]),_(X,{activeKey:b(A),"onUpdate:activeKey":t[3]||(t[3]=e=>P(A)?A.value=e:null),accordion:""},{default:k((()=>[_(M,{key:"1",header:"利润回收方案 展开/收起"},{default:k((()=>[b(i)?(w(),y(m,{key:0,status:"primary",onClick:t[0]||(t[0]=e=>b(K)("业务上一个结算仅选一个方案；但程序不做校验限制。").then((()=>b(Z).showPlanSelector=!0)))},{default:k((()=>[v(" 添加方案 ")])),_:1})):S("v-if",!0),_(B,{activeKey:b(W),"onUpdate:activeKey":t[1]||(t[1]=e=>P(W)?W.value=e:null),type:"editable-card","hide-add":"",onEdit:t[2]||(t[2]=e=>b(K)("按tab删除所有数据")),style:{"margin-top":"10px"}},{default:k((()=>[_(z,{key:"2",tab:"进口商"},{default:k((()=>[_(Y,V({ref:"xGrid"},b(ee)),null,16)])),_:1}),_(z,{key:"1",tab:"经销商"},{default:k((()=>[_(Y,V({ref:"xGrid"},b(te)),null,16)])),_:1})])),_:1},8,["activeKey"])])),_:1})])),_:1},8,["activeKey"]),_(E,{"title-align":"right","title-width":"100",style:{"margin-top":"20px"}},{default:k((()=>[_(n,{title:"利润回收情况","title-align":"left","title-width":160,span:24,"title-prefix":{content:"需要根据方案中的回收类型，来确认展示几个tab"}},{default:k((()=>[b(i)?(w(),y(m,{key:0,status:"primary",onClick:t[4]||(t[4]=e=>b(K)("根据选择的方案重新计算，点击时给出提示"))},{default:k((()=>[v(" 刷新明细 ")])),_:1})):S("v-if",!0),_(m,{onClick:t[5]||(t[5]=e=>b(K)("根据角色的各自权限查看和下载数据；\n              商务经理和商务总监只能查看经销商相关的关联省份的数据；\n              进口商务只能查看进口商的关联的产品的数据；\n              导出加一个支付汇总sheet，by支付对象汇总，字段为支付对象，金额"))},{default:k((()=>[v(" 下载数据 ")])),_:1}),b(r)||b(T)?(w(),y(m,{key:1,onClick:t[6]||(t[6]=e=>b(K)("商务和商务总监不可见").then((()=>{b(Z).showFinanceSelector=!0})))},{default:k((()=>[v(" 财务审核凭证 ")])),_:1})):S("v-if",!0)])),_:1})])),_:1}),_(B,{activeKey:b(O),"onUpdate:activeKey":t[45]||(t[45]=e=>P(O)?O.value=e:null),type:"card"},{default:k((()=>[_(z,{key:"4",tab:"进口商回收明细-进货量"},{default:k((()=>[_(Y,D(R(b(ae))),{search_operation:k((()=>[_(m,{status:"primary",onClick:t[7]||(t[7]=e=>b(K)("根据权限查询"))},{default:k((()=>[v("搜索")])),_:1})])),operations:k((()=>[b(a)?(w(),y(m,{key:0,status:"primary",onClick:t[8]||(t[8]=e=>b(K)("只有商务才使用此按钮\n              只有核验拒绝且标记为完成的数据，才能使用申诉功能").then((()=>b(Z).showAppealSelector=!0)))},{default:k((()=>[v(" 申诉 ")])),_:1})):S("v-if",!0)])),toolbar_buttons:k((()=>[b(i)?(w(),y(m,{key:0,status:"primary",onClick:t[9]||(t[9]=e=>b(K)("上传进货量。如果方案中有类型为进货量则按此数据计算。\n              上传内容包括销售日期、商业名称、商业编码、产品编码、产品、批号、数量 "))},{default:k((()=>[v(" TTD上传 ")])),_:1})):S("v-if",!0),b(i)||b(d)||b(a)?(w(),y(m,{key:1,status:"primary",onClick:t[10]||(t[10]=e=>b(Z).showT1Selector=!0)},{default:k((()=>[v(" 更新支付对象 ")])),_:1})):S("v-if",!0),b(i)?(w(),y(m,{key:2,status:"danger",onClick:t[11]||(t[11]=e=>b(K)("直接删除"))},{default:k((()=>[v(" 删除 ")])),_:1})):S("v-if",!0),b(a)?(w(),y(m,{key:3,status:"primary",onClick:t[12]||(t[12]=e=>b(K)("进口商需要校验什么？反馈什么？"))},{default:k((()=>[v(" 提交 ")])),_:1})):S("v-if",!0),_(m,{onClick:t[13]||(t[13]=e=>b(K)("导出所有数据，无视分页"))},{default:k((()=>[v("下载数据")])),_:1}),b(d)||b(a)?(w(),y(m,{key:4,status:"primary",onClick:t[14]||(t[14]=e=>b(K)("系统仅计算总金额，不保存到数据库\n              根据角色可见数据范围进行sum"))},{default:k((()=>[v(" 试算 ")])),_:1})):S("v-if",!0),b(d)?(w(),y(m,{key:5,status:"warning",onClick:t[15]||(t[15]=e=>b(K)("勾选数据，不勾选则按查询条件；对于进口商，核验什么？").then((()=>b(Z).showApprovalSelector=!0)))},{default:k((()=>[v(" 核验数据 ")])),_:1})):S("v-if",!0),b(d)?(w(),y(m,{key:6,status:"warning",onClick:t[16]||(t[16]=e=>b(K)("勾选数据，不勾选则按查询条件").then((()=>b(Z).showApprovalOKSelector=!0)))},{default:k((()=>[v(" 标记完成 ")])),_:1})):S("v-if",!0)])),_:1},16)])),_:1}),_(z,{key:"3",tab:"进口商回收明细-出货量"},{default:k((()=>[_(Y,D(R(b(de))),{search_operation:k((()=>[_(m,{status:"primary",onClick:t[17]||(t[17]=e=>b(K)("根据权限查询"))},{default:k((()=>[v("搜索")])),_:1})])),operations:k((()=>[b(a)?(w(),y(m,{key:0,status:"primary",onClick:t[18]||(t[18]=e=>b(K)("只有商务才使用此按钮\n              只有核验拒绝且标记为完成的数据，才能使用申诉功能").then((()=>b(Z).showAppealSelector=!0)))},{default:k((()=>[v(" 申诉 ")])),_:1})):S("v-if",!0)])),toolbar_buttons:k((()=>[b(i)||b(d)||b(a)?(w(),y(m,{key:0,status:"primary",onClick:t[19]||(t[19]=e=>b(Z).showT1Selector=!0)},{default:k((()=>[v(" 更新支付对象 ")])),_:1})):S("v-if",!0),b(i)?(w(),y(m,{key:1,status:"danger",onClick:t[20]||(t[20]=e=>b(K)("直接删除"))},{default:k((()=>[v(" 删除 ")])),_:1})):S("v-if",!0),b(a)?(w(),y(m,{key:2,status:"primary",onClick:t[21]||(t[21]=e=>b(K)("进口商需要校验什么？反馈什么？"))},{default:k((()=>[v(" 提交 ")])),_:1})):S("v-if",!0),_(m,{onClick:t[22]||(t[22]=e=>b(K)("导出所有数据，无视分页"))},{default:k((()=>[v("下载数据")])),_:1}),b(d)||b(a)?(w(),y(m,{key:3,status:"primary",onClick:t[23]||(t[23]=e=>b(K)("系统仅计算总金额，不保存到数据库\n              根据角色可见数据范围进行sum"))},{default:k((()=>[v(" 试算 ")])),_:1})):S("v-if",!0),b(d)?(w(),y(m,{key:4,status:"warning",onClick:t[24]||(t[24]=e=>b(K)("勾选数据，不勾选则按查询条件；对于进口商，核验什么？").then((()=>b(Z).showApprovalSelector=!0)))},{default:k((()=>[v(" 核验数据 ")])),_:1})):S("v-if",!0),b(d)?(w(),y(m,{key:5,status:"warning",onClick:t[25]||(t[25]=e=>b(K)("勾选数据，不勾选则按查询条件").then((()=>b(Z).showApprovalOKSelector=!0)))},{default:k((()=>[v(" 标记完成 ")])),_:1})):S("v-if",!0)])),_:1},16)])),_:1}),_(z,{key:"2",tab:"经销商回收明细-进货量"},{default:k((()=>[_(Y,D(R(b(le))),{search_operation:k((()=>[_(m,{status:"primary",onClick:t[26]||(t[26]=e=>b(K)("根据省份权限查询"))},{default:k((()=>[v("搜索")])),_:1})])),operations:k((()=>[b(a)?(w(),y(m,{key:0,status:"primary",onClick:t[27]||(t[27]=e=>b(K)("只有商务才使用此按钮\n              只有核验拒绝且标记为完成的数据，才能使用申诉功能").then((()=>b(Z).showAppealSelector=!0)))},{default:k((()=>[v(" 申诉 ")])),_:1})):S("v-if",!0)])),toolbar_buttons:k((()=>[b(i)?(w(),y(m,{key:0,status:"primary",onClick:t[28]||(t[28]=e=>b(K)("上传进货量。如果方案中有类型为进货量则按此数据计算。需按角色校验省份（商务关联的省份，数据团队所有省份）。\n              上传内容包括销售日期、省份、商业名称、商业编码、产品编码、产品、批号、数量 "))},{default:k((()=>[v(" TTD上传 ")])),_:1})):S("v-if",!0),b(i)||b(d)||b(a)?(w(),y(m,{key:1,status:"primary",onClick:t[29]||(t[29]=e=>b(Z).showT1Selector=!0)},{default:k((()=>[v(" 更新一级商 ")])),_:1})):S("v-if",!0),b(i)?(w(),y(m,{key:2,status:"danger",onClick:t[30]||(t[30]=e=>b(K)("直接删除"))},{default:k((()=>[v(" 删除 ")])),_:1})):S("v-if",!0),b(a)?(w(),y(m,{key:3,status:"primary",onClick:t[31]||(t[31]=e=>b(K)("提交可以根据勾选情况或查询条件来做批量提交。提交时系统校验一级商不允许为空"))},{default:k((()=>[v(" 提交 ")])),_:1})):S("v-if",!0),_(m,{onClick:t[32]||(t[32]=e=>b(K)("导出所有数据，无视分页"))},{default:k((()=>[v("下载数据")])),_:1}),b(d)||b(a)?(w(),y(m,{key:4,status:"primary",onClick:t[33]||(t[33]=e=>b(K)("系统仅计算总金额，不保存到数据库\n              根据角色可见数据范围进行sum"))},{default:k((()=>[v(" 试算 ")])),_:1})):S("v-if",!0),b(d)?(w(),y(m,{key:5,status:"warning",onClick:t[34]||(t[34]=e=>b(K)("勾选数据，不勾选则按查询条件").then((()=>b(Z).showApprovalSelector=!0)))},{default:k((()=>[v(" 核验数据 ")])),_:1})):S("v-if",!0),b(d)?(w(),y(m,{key:6,status:"warning",onClick:t[35]||(t[35]=e=>b(K)("勾选数据，不勾选则按查询条件").then((()=>b(Z).showApprovalOKSelector=!0)))},{default:k((()=>[v(" 标记完成 ")])),_:1})):S("v-if",!0)])),_:1},16)])),_:1}),_(z,{key:"1",tab:"经销商回收明细-出货量"},{default:k((()=>[_(Y,D(R(b(ie))),{search_operation:k((()=>[_(m,{status:"primary",onClick:t[36]||(t[36]=e=>b(K)("根据省份权限查询"))},{default:k((()=>[v("搜索")])),_:1})])),operations:k((()=>[b(a)?(w(),y(m,{key:0,status:"primary",onClick:t[37]||(t[37]=e=>b(K)("只有商务才使用此按钮\n              只有核验拒绝且标记为完成的数据，才能使用申诉功能").then((()=>b(Z).showAppealSelector=!0)))},{default:k((()=>[v(" 申诉 ")])),_:1})):S("v-if",!0)])),toolbar_buttons:k((()=>[b(i)||b(d)||b(a)?(w(),y(m,{key:0,status:"primary",onClick:t[38]||(t[38]=e=>b(Z).showT1Selector=!0)},{default:k((()=>[v(" 更新一级商 ")])),_:1})):S("v-if",!0),b(i)?(w(),y(m,{key:1,status:"danger",onClick:t[39]||(t[39]=e=>b(K)("直接删除"))},{default:k((()=>[v(" 删除 ")])),_:1})):S("v-if",!0),b(a)?(w(),y(m,{key:2,status:"primary",onClick:t[40]||(t[40]=e=>b(K)("提交可以根据勾选情况或查询条件来做批量提交。提交时系统校验一级商不允许为空"))},{default:k((()=>[v(" 提交 ")])),_:1})):S("v-if",!0),_(m,{onClick:t[41]||(t[41]=e=>b(K)("导出所有数据，无视分页"))},{default:k((()=>[v("下载数据")])),_:1}),b(d)||b(a)?(w(),y(m,{key:3,status:"primary",onClick:t[42]||(t[42]=e=>b(K)("系统仅计算总金额，不保存到数据库\n              根据角色可见数据范围进行sum"))},{default:k((()=>[v(" 试算 ")])),_:1})):S("v-if",!0),b(d)?(w(),y(m,{key:4,status:"warning",onClick:t[43]||(t[43]=e=>b(K)("勾选数据，不勾选则按查询条件").then((()=>b(Z).showApprovalSelector=!0)))},{default:k((()=>[v(" 核验数据 ")])),_:1})):S("v-if",!0),b(d)?(w(),y(m,{key:5,status:"warning",onClick:t[44]||(t[44]=e=>b(K)("勾选数据，不勾选则按查询条件").then((()=>b(Z).showApprovalOKSelector=!0)))},{default:k((()=>[v(" 标记完成 ")])),_:1})):S("v-if",!0)])),_:1},16)])),_:1})])),_:1},8,["activeKey"]),_(E,{"title-align":"right","title-width":"100",rules:b(Z).formRules,ref_key:"xForm",ref:J},{default:k((()=>[_(n,{align:"center","title-align":"left",span:24},{default:k((()=>[b(i)?(w(),y(m,{key:0,type:"submit",status:"primary",onClick:oe},{default:k((()=>[v(" 发布初版 ")])),_:1})):S("v-if",!0),b(i)?(w(),y(m,{key:1,type:"submit",status:"primary",onClick:t[46]||(t[46]=e=>b(K)("保存草稿数据，校验必填项"))},{default:k((()=>[v(" 保存草稿 ")])),_:1})):S("v-if",!0),b(d)?(w(),y(m,{key:2,status:"primary",onClick:t[47]||(t[47]=e=>b(K)("如果是商务经理确认阶段，可以将报告撤回至草稿状态（发邮件通知商务），然后调整利润回收方案。当重新发布初版后，系统会根据新的关系处理已存在的流向数据（enabled=false），保留所有商务经理填写的内容").then((()=>{b(F)(b(l),"payment-benefit-reclaim-edit")})))},{default:k((()=>[v(" 撤回报告 ")])),_:1})):S("v-if",!0),b(d)?(w(),y(m,{key:3,status:"primary",onClick:t[48]||(t[48]=e=>b(K)("如果是商务经理确认阶段，发送提醒邮件给到未完成核验的关联省份的商务经理。\n                如果是商务总监确认阶段，需要发送给未进行确认的商务总监。"))},{default:k((()=>[v(" 发送邮件提醒 ")])),_:1})):S("v-if",!0),b(d)?(w(),y(m,{key:4,status:"primary",onClick:t[49]||(t[49]=e=>b(K)("系统校验所有数据状态为标记完成。\n                完成汇总数据的计算，表单状态变更为计算完成，可以进行下载报告供财务审核，上传财务审核凭证等信息").then((()=>b(F)(b(l),"payment-benefit-reclaim-ready-for-finance"))))},{default:k((()=>[v(" 正式计算 ")])),_:1})):S("v-if",!0),b(r)?(w(),y(m,{key:5,status:"primary",onClick:t[50]||(t[50]=e=>b(K)("线下完成财务审核，发送提醒邮件给商务总监").then((()=>b(F)(b(l),"payment-benefit-reclaim-confirm-calculate"))))},{default:k((()=>[v(" 发送商务总监确认 ")])),_:1})):S("v-if",!0),b(T)?(w(),y(m,{key:6,status:"primary",onClick:t[51]||(t[51]=e=>b($)("请检查所有关联附件已上传完成。发布终版后，表单冻结无法修改。").then((e=>{"confirm"===e&&b(K)("当所有的商务总监都确认完成，可以发布终版,表单状态变为待提交审批。\n                发布成功后，会给相关商务经理和商务总监发送“发布终版”通知邮件。\n                ")})))},{default:k((()=>[v(" 发布终版 ")])),_:1})):S("v-if",!0),b(f)?(w(),y(m,{key:7,status:"primary",onClick:t[52]||(t[52]=e=>b(K)("商务总监对数据进行核验").then((()=>b(F)(b(l),"payment-benefit-reclaim-confirmed"))))},{default:k((()=>[v(" 数据确认 ")])),_:1})):S("v-if",!0),_(m,{onClick:t[53]||(t[53]=e=>b(F)(b(l),"payment-benefit-reclaim"))},{default:k((()=>[v("返回列表")])),_:1})])),_:1})])),_:1},8,["rules"]),_(ne,{modelValue:b(Z).showPlanSelector,"onUpdate:modelValue":t[57]||(t[57]=e=>b(Z).showPlanSelector=e),title:"选择利润回收方案",width:"50%","min-width":"600","min-height":"300",resize:"","destroy-on-close":""},{default:k((()=>[_(Y,D(R(b(re))),{search_operation:k((()=>[_(m,{status:"primary",onClick:t[54]||(t[54]=e=>b(K)("审批通过的利润回收方案"))},{default:k((()=>[v(" 搜索 ")])),_:1})])),toolbar_buttons:k((()=>[_(L,null,{default:k((()=>[v("进口商")])),_:1}),_(L,null,{default:k((()=>[v("经销商")])),_:1}),_(m,{status:"primary",style:{"margin-left":"12px"},onClick:t[55]||(t[55]=e=>b(K)("根据选择的方案，和进口商、经销商的选择情况来筛选方案的明细。例如选择了经销商，则将方案中的回收对象是经销商的所有明细带回。"))},{default:k((()=>[v(" 确认选择 ")])),_:1})])),operations:k((()=>[_(m,{status:"danger",onClick:t[56]||(t[56]=e=>b(K)("直接删除"))},{default:k((()=>[v("删除")])),_:1})])),_:1},16)])),_:1},8,["modelValue"]),_(ne,{modelValue:b(Z).showT1Selector,"onUpdate:modelValue":t[60]||(t[60]=e=>b(Z).showT1Selector=e),title:"更新一级商","min-width":"600","min-height":"300",resize:"","destroy-on-close":""},{default:k((()=>[_(E,{"title-align":"right","title-width":"100",onSubmit:t[59]||(t[59]=e=>b(Z).showT1Selector=!1)},{default:k((()=>[_(n,{title:"一级商",span:20,"item-render":{}},{default:k((()=>[_(N,{transfer:""})])),_:1}),_(n,{title:"备注",span:20,"item-render":{}},{default:k((()=>[_(q)])),_:1}),_(n,{align:"center","title-align":"left",span:24},{default:k((()=>[_(m,{type:"submit",status:"primary",onClick:t[58]||(t[58]=e=>b(K)("如果有勾选，则更新勾选数据的一级商\n                    如果没有勾选，则会按照查询条件批量更新所有符合的数据\n                    核验通过状态的数据不能更新"))},{default:k((()=>[v(" 确认更新一级商 ")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),_(ne,{modelValue:b(Z).showApprovalOKSelector,"onUpdate:modelValue":t[62]||(t[62]=e=>b(Z).showApprovalOKSelector=e),title:"标记完成",width:"50%","min-width":"600","min-height":"300",resize:"","destroy-on-close":""},{default:k((()=>[_(E,{"title-align":"right","title-width":"100",onSubmit:t[61]||(t[61]=e=>b(Z).showApprovalOKSelector=!1)},{default:k((()=>[_(n,{span:24,"item-render":{}},{default:k((()=>[Q])),_:1}),_(n,{title:"核验结果",span:24,"item-render":{}},{default:k((()=>[_(N,{transfer:"",options:[{value:"标记完成",label:"标记完成"},{value:"清除完成标记",label:"清除完成标记"}]})])),_:1}),_(n,{title:"原因",span:24,"item-render":{}},{default:k((()=>[_(q,{"model-value":""})])),_:1}),_(n,{align:"center","title-align":"left",span:24},{default:k((()=>[_(m,{type:"submit",status:"primary"},{default:k((()=>[v("确认")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),_(ne,{modelValue:b(Z).showApprovalSelector,"onUpdate:modelValue":t[65]||(t[65]=e=>b(Z).showApprovalSelector=e),title:"数据核验",width:"50%","min-width":"600","min-height":"300",resize:"","destroy-on-close":""},{default:k((()=>[_(E,{"title-align":"right","title-width":"100",onSubmit:t[64]||(t[64]=e=>b(Z).showT1Selector=!1)},{default:k((()=>[_(n,{title:"核验结果",span:24,"item-render":{}},{default:k((()=>[_(N,{transfer:"",options:[{value:"流向核验通过",label:"流向核验通过"},{value:"流向核验拒绝",label:"流向核验拒绝"}]})])),_:1}),_(n,{title:"原因",span:24,"item-render":{}},{default:k((()=>[_(q,{"model-value":""})])),_:1}),_(n,{align:"center","title-align":"left",span:24},{default:k((()=>[_(m,{type:"submit",status:"primary",onClick:t[63]||(t[63]=e=>b(K)("核验通过，原因可为空\n                    标记完成，只能是核验通过或核验拒绝的数据，原因可为空\n                    核验拒绝，原因必填\n                    "))},{default:k((()=>[v(" 确认 ")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),_(ne,{modelValue:b(Z).showFinanceSelector,"onUpdate:modelValue":t[66]||(t[66]=e=>b(Z).showFinanceSelector=e),title:"财务审核凭证",width:"90%","min-width":"600","min-height":"300",resize:"","destroy-on-close":""},{default:k((()=>[_(E,{"title-align":"right","title-width":"100"},{default:k((()=>[_(n,{span:24},{default:k((()=>[_(se,{"enable-insert":b(r),"enable-remove":b(r)},null,8,["enable-insert","enable-remove"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),_(ne,{modelValue:b(Z).showAppealSelector,"onUpdate:modelValue":t[69]||(t[69]=e=>b(Z).showAppealSelector=e),title:"申诉原因填写",width:"50%","min-width":"600","min-height":"300",resize:"","destroy-on-close":""},{default:k((()=>[_(E,{"title-align":"right","title-width":"100",onSubmit:t[68]||(t[68]=e=>b(Z).showAppealSelector=!1)},{default:k((()=>[_(n,{title:"申诉原因",span:24,"item-render":{}},{default:k((()=>[_(q,{"model-value":""})])),_:1}),_(n,{align:"center","title-align":"left",span:24},{default:k((()=>[_(m,{type:"submit",status:"primary",onClick:t[67]||(t[67]=e=>b(K)("确认后，系统将申诉原因保存，并把数据提交。"))},{default:k((()=>[v(" 确认申诉 ")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}}}),[["__file","C:/Users/ThinkPad/source/Bonbonniere/bonbon-vue/src/views/c-payment/BenefitReclaimPaymentCreator.vue"]]);export{J as default};
