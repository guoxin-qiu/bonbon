var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,i=(e,t,a)=>new Promise(((l,n)=>{var o=e=>{try{i(a.next(e))}catch(t){n(t)}},r=e=>{try{i(a.throw(e))}catch(t){n(t)}},i=e=>e.done?l(e.value):Promise.resolve(e.value).then(o,r);i((a=a.apply(e,t)).next())}));import{d as s,r as d,aQ as c,az as p,bj as u,aV as f,aW as m,aS as y,a as v,aR as b,ca as h,ay as _,ac as k,bk as g,bJ as w,a_ as C,aX as x,cf as V,a$ as D}from"./index.44eff430.js";import{g as T}from"./c-payment-inventory.service.2a7f2e3b.js";import{r as S}from"./routerHelper.692f5c09.js";import{g as j,a as R,b as E}from"./vxeTableHelper.6baae079.js";import{b as P,c as U}from"./temporary-data.4dfd9cc4.js";import{_ as B}from"./index.a1613b4e.js";import{_ as O}from"./Grid.691fb1da.js";import{C as I}from"./Card.3ece05fb.js";import"./Col.a5355e16.js";const L=D(s({__name:"InventoryPaymentList",setup(e){const s=d(),D=c(),L=p((q=((e,t)=>{for(var a in t||(t={}))n.call(t,a)&&r(e,a,t[a]);if(l)for(var a of l(t))o.call(t,a)&&r(e,a,t[a]);return e})({},j("InventoryPaymentList",T)),t(q,a({formConfig:{items:[{field:"name",itemRender:{},slots:{default:"search_name"}},{field:"type",itemRender:{},slots:{default:"search_type"}},{field:"subType",itemRender:{},slots:{default:"search_subType"}},{field:"startDateBegin",folding:!0,itemRender:{},slots:{default:"search_startDateBegin"}},{field:"startDateEnd",folding:!0,itemRender:{},slots:{default:"search_startDateEnd"}},{field:"endDateBegin",folding:!0,itemRender:{},slots:{default:"search_endDateBegin"}},{field:"endDateEnd",folding:!0,itemRender:{},slots:{default:"search_endDateEnd"}},{field:"status",itemRender:{},slots:{default:"search_status"}},{field:"approvedDateBegin",folding:!0,itemRender:{},slots:{default:"search_approvedDateBegin"}},{field:"approvedDateEnd",folding:!0,itemRender:{},slots:{default:"search_approvedDateEnd"}},{field:"amountStart",folding:!0,itemRender:{},slots:{default:"search_amountStart"}},{field:"amountEnd",folding:!0,itemRender:{},slots:{default:"search_amountEnd"}},{collapseNode:!0,itemRender:{},slots:{default:"search_operation"}}]},columns:[{field:"checkbox",type:"checkbox",width:50,align:"center",fixed:"left"},{field:"#",type:"seq",width:60},{field:"name",title:"报告名称",width:400,slots:{default:"name_link"}},{field:"subType",title:"降价类型",width:180,slots:{default:"sub_type"}},{field:"startDate",title:"结算开始日期",width:150},{field:"endDate",title:"结算结束日期",width:150},{field:"totalAmount",title:"补偿总金额",width:150,titlePrefix:{content:"如果是商务经理或者区域商务总监来查看，需要根据其可查看数据的权限，重新汇总计算",icon:"vxe-icon-question-circle-fill"}},{field:"createdDate",title:"提交日期",width:150},{field:"approvedDate",title:"审批完成日期",width:150},{field:"approvalStatus",title:"审批状态",width:150,fixed:"right"},{title:"操作",align:"left",width:160,fixed:"right",titlePrefix:{content:"按钮名称仅为了展示功能。实际是查看按钮，进入详情后，根据角色和表单状态设置按钮可见"},slots:{default:"operations"}}]}))));var q;const z=d(P),G=d(U),H=p({showCreateSelector:!1}),A=e=>{e||(H.showCreateSelector=!0),"单中标价下调"===e&&S(D,"c-payment-inventory--create"),"单出厂价下调"===e&&S(D,"c-payment-inventory-fac-create"),"中标价&出厂价同时下调"===e&&S(D,"c-payment-inventory-pair-create")},J=e=>i(this,null,(function*(){if("单中标价下调"===e.subType){"confirm"===(yield E("数据团队提交报告后，商务经理可进入报告挑选流向，并补充一级商、发票等信息"))&&S(D,"c-payment-inventory-calculate")}if("单出厂价下调"===e.subType){"confirm"===(yield E("数据团队提交报告后，商务经理可进入补充一级商等信息"))&&S(D,"c-payment-inventory-fac-calculate")}if("中标价&出厂价同时下调"===e.subType){"confirm"===(yield E("数据团队提交报告后，商务经理可进入报告挑选库存，并补充一级商、库存凭证等信息"))&&S(D,"c-payment-inventory-pair-calculate")}})),N=e=>i(this,null,(function*(){if("单中标价下调"===e.subType){"confirm"===(yield E("计算中"===e.approvalStatus?"数据团队核验，标记抽查发票":"商务总监核验，对于所管大区内所有省份的数据进行核验通过或拒绝\n  不针对单条或单个省，针对所有数据进行通过或拒绝"))&&S(D,"计算中"===e.approvalStatus?"c-payment-inventory-check-calculate":"c-payment-inventory-confirm-calculate")}if("单出厂价下调"===e.subType){"confirm"===(yield E("计算中"===e.approvalStatus?"数据团队核验":"商务总监核验。\n        系统没有进口商务总监角色，那进口商的数据应该怎么核验？"))&&S(D,"计算中"===e.approvalStatus?"c-payment-inventory-fac-check-calculate":"c-payment-inventory-fac-confirm-calculate")}if("中标价&出厂价同时下调"===e.subType){"confirm"===(yield E("计算中"===e.approvalStatus?"数据团队核验":"商务总监核验。\n        系统没有进口商务总监角色，那进口商的数据应该怎么核验？"))&&S(D,"计算中"===e.approvalStatus?"c-payment-inventory-pair-check-calculate":"c-payment-inventory-pair-confirm-calculate")}}));return(e,t)=>{const a=u("vxe-input"),l=u("vxe-option"),n=u("vxe-select"),o=u("vxe-button"),r=B,i=u("vxe-grid"),d=O,c=I,p=u("vxe-modal"),T=u("page-container");return f(),m(T,null,{default:y((()=>[v(i,V({ref_key:"xGrid",ref:s},_(L)),{search_name:y((({data:e})=>[v(a,{modelValue:e.name,"onUpdate:modelValue":t=>e.name=t,type:"text",placeholder:"报告名称"},null,8,["modelValue","onUpdate:modelValue"])])),search_subType:y((({data:e})=>[v(n,{modelValue:e.subType,"onUpdate:modelValue":t=>e.subType=t,transfer:"",clearable:"",placeholder:"降价类型"},{default:y((()=>[(f(!0),b(k,null,h(_(z),(e=>(f(),m(l,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),search_status:y((({data:e})=>[v(n,{modelValue:e.status,"onUpdate:modelValue":t=>e.status=t,transfer:"",clearable:"",placeholder:"审批状态"},{default:y((()=>[(f(!0),b(k,null,h(_(G),(e=>(f(),m(l,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),search_approvedDateBegin:y((({data:e})=>[v(a,{modelValue:e.approvedDateBegin,"onUpdate:modelValue":t=>e.approvedDateBegin=t,type:"date",placeholder:"审批完成日期从"},null,8,["modelValue","onUpdate:modelValue"])])),search_approvedDateEnd:y((({data:e})=>[v(a,{modelValue:e.approvedDateEnd,"onUpdate:modelValue":t=>e.approvedDateEnd=t,type:"date",placeholder:"审批完成日期到"},null,8,["modelValue","onUpdate:modelValue"])])),search_operation:y((()=>[v(o,{type:"submit",status:"primary",content:"搜索"}),v(o,{type:"download",status:"primary",content:"下载报告",onClick:t[0]||(t[0]=e=>_(R)("只能下载单个报告"))})])),toolbar_buttons:y((()=>[v(o,{onClick:t[1]||(t[1]=e=>A()),type:"create",status:"primary",content:"创建报告"}),v(o,{onClick:t[2]||(t[2]=e=>_(R)("至少勾选一条数据；只有草稿状态的报告才允许取消")),type:"cancel",status:"primary",content:"取消报告"}),v(o,{onClick:t[3]||(t[3]=e=>_(R)("至少勾选一条数据；只有审批通过的报告才允许停用")),type:"stop",status:"primary",content:"停用报告"}),v(o,{onClick:t[4]||(t[4]=e=>_(R)("至少勾选一条数据；只有状态为“待审批”的报告允许提交审批；提交审批后，弹出结算审批申请单")),type:"approval",status:"primary",content:"提交审批"})])),name_link:y((({row:e})=>[g("span",{class:"name-link",onClick:t[5]||(t[5]=e=>_(R)("进入表单，根据角色和状态控制显示的内容和按钮"))},w(e.name),1)])),sub_type:y((({row:e})=>[v(r,{color:"单中标价下调"===e.subType?"green":"单出厂价下调"===e.subType?"cyan":"blue"},{default:y((()=>[C(w(e.subType),1)])),_:2},1032,["color"])])),operations:y((({row:e})=>[x(' <vxe-button title="查看" status="primary" @click="viewRowEvent(row)">查看</vxe-button> '),"草稿"===e.approvalStatus?(f(),m(o,{key:0,title:"编辑",status:"primary",onClick:t=>(e=>{"单中标价下调"===e.subType&&S(D,"c-payment-inventory-edit"),"单出厂价下调"===e.subType&&S(D,"c-payment-inventory-fac-edit"),"中标价&出厂价同时下调"===e.subType&&S(D,"c-payment-inventory-pair-edit")})(e)},{default:y((()=>[C(" 编辑 ")])),_:2},1032,["onClick"])):x("v-if",!0),"计算中"===e.approvalStatus?(f(),m(o,{key:1,title:"填报",status:"primary",onClick:t=>J(e)},{default:y((()=>[C(" 填报 ")])),_:2},1032,["onClick"])):x("v-if",!0),"计算中"===e.approvalStatus?(f(),m(o,{key:2,title:"数据团队核验",status:"primary",onClick:t=>N(e)},{default:y((()=>[C(" 核验 ")])),_:2},1032,["onClick"])):x("v-if",!0),"计算完成"===e.approvalStatus?(f(),m(o,{key:3,title:"发送商务总监",status:"primary",onClick:t=>(e=>{"单中标价下调"===e.subType&&S(D,"c-payment-inventory-ready-for-finance"),"单出厂价下调"===e.subType&&S(D,"c-payment-inventory-fac-ready-for-finance"),"中标价&出厂价同时下调"===e.subType&&S(D,"c-payment-inventory-pair-ready-for-finance")})(e)},{default:y((()=>[C(" 发送商务总监 ")])),_:2},1032,["onClick"])):x("v-if",!0),"待商务总监确认"===e.approvalStatus?(f(),m(o,{key:4,title:"商务总监确认",status:"primary",onClick:t=>N(e)},{default:y((()=>[C(" 确认 ")])),_:2},1032,["onClick"])):x("v-if",!0)])),_:1},16),v(p,{modelValue:_(H).showCreateSelector,"onUpdate:modelValue":t[9]||(t[9]=e=>_(H).showCreateSelector=e),title:"请选择要创建的库存结算报告场景","min-width":"600","min-height":"300",resize:"","destroy-on-close":""},{default:y((()=>[v(c,null,{default:y((()=>[v(d,{class:"card-grid",onClick:t[6]||(t[6]=e=>A("单中标价下调"))},{default:y((()=>[C(" 单中标价下调 ")])),_:1}),v(d,{class:"card-grid",onClick:t[7]||(t[7]=e=>A("单出厂价下调"))},{default:y((()=>[C(" 单出厂价下调 ")])),_:1}),v(d,{class:"card-grid",onClick:t[8]||(t[8]=e=>A("中标价&出厂价同时下调"))},{default:y((()=>[C(" 中标价&出厂价同时下调 ")])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}}}),[["__file","C:/Users/ThinkPad/source/Bonbonniere/bonbon-vue/src/views/c-payment/InventoryPaymentList.vue"]]);export{L as default};
