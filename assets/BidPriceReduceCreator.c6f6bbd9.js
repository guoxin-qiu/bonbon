var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,n=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,r=(e,a)=>{for(var t in a||(a={}))o.call(a,t)&&n(e,t,a[t]);if(l)for(var t of l(a))i.call(a,t)&&n(e,t,a[t]);return e};import{d,aQ as u,r as s,az as m,a9 as p,bj as f,aV as c,aW as v,aS as y,a as h,aX as w,aR as V,ca as b,ay as S,ac as _,a_ as g,cf as x,bk as U,a$ as k}from"./index.44eff430.js";import{g as C,a as D,p as P}from"./vxeTableHelper.6baae079.js";import{d as j,b as q,q as N,g as E,s as R}from"./temporary-data.4dfd9cc4.js";import{d as T}from"./dayjs.min.7438ea6f.js";import{r as A}from"./routerHelper.692f5c09.js";const O=k(d({__name:"BidPriceReduceCreator",setup(e){const l=u(),o=s(),i=s(),n=m({formData:{chineseName:"",englishName:"",inventoryCompensationScenario:"",inventoryCompensationType:"",t1t2Ref:"",periodStart:"",periodEnd:"",period:void 0,windowPhaseStartDate:"",windowPhaseEndDate:""},formRules:{chineseName:[{required:!0}],englishName:[{required:!0}],inventoryCompensationScenario:[{required:!0}],inventoryCompensationType:[{required:!0}],t1t2Ref:[{required:!0}],period:[{required:!0}]},showQuarterSelector:!1,quarterSelector:{selected:""},showSKUAreaSelector:!1,skuAreaSelector:{province:1,city:void 0,rules:{province:[{required:!0}],sku:[{required:!0}]}}}),d={chineseName:"单中标价下调库存结算报告",englishName:"Single winning price downward inventory settlement report",inventoryCompensationScenario:"单中标价下调",inventoryCompensationType:"库存补偿",t1t2Ref:"2022Q4",periodStart:"2022-05-01",periodEnd:"2022-10-31",windowPhaseStartDate:T().format("YYYY-MM-DD"),windowPhaseEndDate:""};n.formData=r(r({},n.formData),d),n.formData.period=p((()=>n.formData.periodStart&&n.formData.periodEnd?`${n.formData.periodStart}~${n.formData.periodEnd}`:""));const k=m((O=r({},C("scopeGrid")),a(O,t({data:j,pagerConfig:void 0,columns:[{field:"province",title:"买方省份",width:200},{field:"city",title:"买方城市",width:200},{field:"skuCode",title:"产品编码",width:200},{field:"skuName",title:"产品名称",width:200},{title:"操作",align:"center",slots:{default:"operations"}}]}))));var O;function Q(){var e;null==(e=o.value)||e.validate((e=>{if(void 0===e){if(!n.formData.windowPhaseStartDate||!n.formData.windowPhaseEndDate)return void D("请先设置窗口期");D(`提交成功！\n          本次结算的窗口期为${n.formData.period}。\n          已发送提醒邮件给相关的商务经理。`).then((()=>{A(l,"c-payment-inventory")}))}}))}function K(){var e;null==(e=i.value)||e.validate((e=>{void 0===e&&P("将选择的内容以笛卡尔积的形式存储到列表中。重复数据做更新操作。")}))}return(e,a)=>{const t=f("vxe-option"),r=f("vxe-select"),d=f("vxe-form-item"),u=f("vxe-input"),s=f("vxe-button"),m=f("vxe-grid"),p=f("vxe-form"),C=f("vxe-modal"),P=f("page-container");return c(),v(P,null,{default:y((()=>[h(p,{"title-align":"right","title-width":"100",data:S(n).formData,rules:S(n).formRules,ref_key:"xForm",ref:o},{default:y((()=>[w(' <vxe-form-item\n        title-width="180"\n        field="inventoryCompensationType"\n        title="报告类型"\n        :span="12"\n        :item-render="{}"\n      >\n        <template #default="{ data }">\n          <vxe-select v-model="data.inventoryCompensationType" disabled placeholder="">\n            <vxe-option\n              v-for="item in compensationType"\n              :key="item.value"\n              :value="item.value"\n              :label="item.label"\n            ></vxe-option>\n          </vxe-select>\n        </template>\n      </vxe-form-item> '),h(d,{"title-width":"180",field:"inventoryCompensationScenario",title:"降价类型",span:12,"item-render":{}},{default:y((({data:e})=>[h(r,{modelValue:e.inventoryCompensationScenario,"onUpdate:modelValue":a=>e.inventoryCompensationScenario=a,transfer:"",disabled:"",placeholder:""},{default:y((()=>[(c(!0),V(_,null,b(S(q),(e=>(c(),v(t,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),h(d,{"title-width":"180",field:"chineseName",title:"报告名称（中文）",span:24,"item-render":{}},{default:y((({data:e})=>[h(u,{modelValue:e.chineseName,"onUpdate:modelValue":a=>e.chineseName=a},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),h(d,{"title-width":"180",field:"englishName",title:"报告名称（英文）",span:24,"item-render":{}},{default:y((({data:e})=>[h(u,{modelValue:e.englishName,"onUpdate:modelValue":a=>e.englishName=a},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),h(d,{"title-width":"180",field:"t1t2Ref",title:"T1&T2关系",span:8,"item-render":{}},{default:y((({data:e})=>[h(r,{modelValue:e.t1t2Ref,"onUpdate:modelValue":a=>e.t1t2Ref=a,transfer:"",clearable:"",placeholder:""},{default:y((()=>[(c(!0),V(_,null,b(S(N),(e=>(c(),v(t,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),h(d,{"title-width":"180",field:"period",title:"结算周期",span:16,"item-render":{}},{default:y((({data:e})=>[h(u,{modelValue:e.periodStart,"onUpdate:modelValue":a=>e.periodStart=a,type:"date",style:{width:"150px"}},null,8,["modelValue","onUpdate:modelValue"]),g(" 至 "),h(u,{modelValue:e.periodEnd,"onUpdate:modelValue":a=>e.periodEnd=a,type:"date",style:{width:"150px"}},null,8,["modelValue","onUpdate:modelValue"]),h(s,{type:"text",status:"primary",content:"按财季选择",onClick:a[0]||(a[0]=e=>S(n).showQuarterSelector=!0),style:{"margin-left":"20px","text-decoration":"underline"}})])),_:1}),h(d,{field:"scope",span:2,"item-render":{}}),h(d,{field:"scope",span:22,"item-render":{}},{default:y((()=>[h(m,x({ref:"xGrid"},S(k)),{toolbar_buttons:y((()=>[h(s,{status:"primary",onClick:a[1]||(a[1]=e=>S(n).showSKUAreaSelector=!0)},{default:y((()=>[g("添加")])),_:1}),h(s,{onClick:a[2]||(a[2]=e=>S(D)("导出所有数据，无视分页"))},{default:y((()=>[g("导出")])),_:1}),U("i",{class:"vxe-icon-question-circle-fill",style:{"margin-left":"10px",cursor:"pointer"},onClick:a[3]||(a[3]=e=>S(D)("列表分页显示，可以实时的存储数据库。\n                  买方省份+买方城市+产品编码不能重复。"))})])),operations:y((()=>[h(s,{status:"danger",onClick:a[4]||(a[4]=e=>S(D)("直接删除关系"))},{default:y((()=>[g("删除")])),_:1})])),_:1},16)])),_:1}),h(d,{"title-width":"180",field:"windowPhase",title:"窗口期",span:16,"item-render":{}},{default:y((({data:e})=>[h(u,{modelValue:e.windowPhaseStartDate,"onUpdate:modelValue":a=>e.windowPhaseStartDate=a,type:"datetime",style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"]),g(" 至 "),h(u,{modelValue:e.windowPhaseEndDate,"onUpdate:modelValue":a=>e.windowPhaseEndDate=a,type:"datetime",style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),h(d,{align:"center","title-align":"left",span:24},{default:y((()=>[h(s,{type:"submit",status:"primary",onClick:Q},{default:y((()=>[g("提交")])),_:1}),h(s,{type:"submit",status:"primary",onClick:a[5]||(a[5]=e=>S(D)("保存草稿数据，校验必填项"))},{default:y((()=>[g(" 保存草稿 ")])),_:1}),h(s,{onClick:a[6]||(a[6]=e=>S(A)(S(l),"c-payment-inventory"))},{default:y((()=>[g("取消")])),_:1})])),_:1})])),_:1},8,["data","rules"]),h(C,{modelValue:S(n).showQuarterSelector,"onUpdate:modelValue":a[8]||(a[8]=e=>S(n).showQuarterSelector=e),title:"按季度选择结算区间","min-width":"600","min-height":"300",resize:"","destroy-on-close":""},{default:y((()=>[h(p,{"title-align":"right","title-width":"100",data:S(n).quarterSelector,onSubmit:a[7]||(a[7]=e=>S(n).showQuarterSelector=!1)},{default:y((()=>[h(d,{field:"quarterSelector",title:"财季",span:24,"item-render":{}},{default:y((({data:e})=>[h(r,{modelValue:e.selected,"onUpdate:modelValue":a=>e.selected=a,transfer:""},{default:y((()=>[(c(!0),V(_,null,b(S(N),(e=>(c(),v(t,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),h(d,{align:"center","title-align":"left",span:24},{default:y((()=>[h(s,{type:"submit",status:"primary"},{default:y((()=>[g("确认")])),_:1})])),_:1})])),_:1},8,["data"])])),_:1},8,["modelValue"]),h(C,{modelValue:S(n).showSKUAreaSelector,"onUpdate:modelValue":a[11]||(a[11]=e=>S(n).showSKUAreaSelector=e),title:"区域-产品关系选择",width:"800","min-width":"600","min-height":"300",resize:"","destroy-on-close":""},{default:y((()=>[h(p,{ref_key:"xxForm",ref:i,"title-align":"right","title-width":"100",data:S(n).skuAreaSelector,rules:S(n).skuAreaSelector.rules,onSubmit:a[10]||(a[10]=e=>S(n).showSKUAreaSelector=!1)},{default:y((()=>[h(d,{field:"province",title:"买方省份",span:12,"item-render":{},"title-prefix":{message:"默认为全国；单选"}},{default:y((({data:e})=>[h(r,{modelValue:e.province,"onUpdate:modelValue":a=>e.province=a,transfer:"",onChange:a[9]||(a[9]=e=>S(n).skuAreaSelector.city=void 0)},{default:y((()=>[(c(!0),V(_,null,b(S(E).filter((e=>0===e.parentId)).map((e=>({value:e.id,label:e.name}))),(e=>(c(),v(t,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),h(d,{field:"city",title:"买方城市",span:12,"item-render":{}},{default:y((({data:e})=>[h(r,{modelValue:e.city,"onUpdate:modelValue":a=>e.city=a,transfer:""},{default:y((()=>[(c(!0),V(_,null,b(S(E).filter((a=>a.parentId===e.province)).map((e=>({value:e.id,label:e.name}))),(e=>(c(),v(t,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),h(d,{field:"sku",title:"产品",span:24,"item-render":{},"title-prefix":{message:"可多选;可搜索"}},{default:y((({data:e})=>[h(r,{modelValue:e.sku,"onUpdate:modelValue":a=>e.sku=a,transfer:"",filterable:"",multiple:"",placeholder:"输入产品编码或名称搜索",options:S(R).map((e=>({value:e.code,label:e.name})))},null,8,["modelValue","onUpdate:modelValue","options"])])),_:1}),h(d,{align:"center","title-align":"left",span:24},{default:y((()=>[h(s,{type:"submit",status:"primary",onClick:K},{default:y((()=>[g(" 添加关联 ")])),_:1})])),_:1})])),_:1},8,["data","rules"])])),_:1},8,["modelValue"])])),_:1})}}}),[["__file","C:/Users/ThinkPad/source/Bonbonniere/bonbon-vue/src/views/c-payment/BidPriceReduceCreator.vue"]]);export{O as default};
